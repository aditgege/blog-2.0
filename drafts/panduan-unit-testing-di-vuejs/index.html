<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="lang">
  <head data-n-head="">
    <title data-n-head="true">[Draft] - Panduan Unit Testing di Vue.js</title><meta data-n-head="true" charset="utf-8"><meta data-n-head="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="true" name="author" content="Irfan Maulana"><meta data-n-head="true" data-hid="keywords" name="keywords" content="mazipan, mazipanneh, irfan maulana, irfan, irfan blibli, irfan bizzy, frontend, frontend developer"><meta data-n-head="true" name="theme-color" content="#bd93f9"><meta data-n-head="true" name="mobile-web-app-capable" content="yes"><meta data-n-head="true" data-hid="og:image" property="og:image" content="https://www.mazipan.xyz/icon.png"><meta data-n-head="true" data-hid="og:image:secure_url" property="og:image:secure_url" content="https://www.mazipan.xyz/icon.png"><meta data-n-head="true" data-hid="og:image:width" property="og:image:width" content="512"><meta data-n-head="true" data-hid="og:image:height" property="og:image:height" content="512"><meta data-n-head="true" data-hid="og:site_name" property="og:site_name" content="@mazipan"><meta data-n-head="true" data-hid="profile:username" property="profile:username" content="mazipanneh"><meta data-n-head="true" name="twitter:card" content="summary"><meta data-n-head="true" name="twitter:creator" content="@maz_ipan"><meta data-n-head="true" name="twitter:site" content="@maz_ipan"><meta data-n-head="true" data-hid="twitter:image:src" name="twitter:image:src" content="https://www.mazipan.xyz/icon.png"><meta data-n-head="true" data-hid="description" name="description" content="Langkah-langkah memasang dan melakukan testing pada kode Vue.js dan Nuxt.js dengan belajar dari berbagai kasus yang terjadi pada proyek nyata"><meta data-n-head="true" data-hid="apple-mobile-web-app-title" name="apple-mobile-web-app-title" content="[Draft] - Panduan Unit Testing di Vue.js"><meta data-n-head="true" data-hid="og:title" property="og:title" content="[Draft] - Panduan Unit Testing di Vue.js"><meta data-n-head="true" data-hid="og:description" property="og:description" content="Langkah-langkah memasang dan melakukan testing pada kode Vue.js dan Nuxt.js dengan belajar dari berbagai kasus yang terjadi pada proyek nyata"><meta data-n-head="true" data-hid="og:url" property="og:url" content="https://www.mazipan.xyz/drafts/panduan-unit-testing-di-vuejs/"><meta data-n-head="true" data-hid="og:type" property="og:type" content="article"><meta data-n-head="true" data-hid="article:published_time" property="article:published_time" content="2019-02-25T00:00:00.000Z"><meta data-n-head="true" data-hid="article:section" property="article:section" content="Technology"><meta data-n-head="true" data-hid="twitter:title" name="twitter:title" content="[Draft] - Panduan Unit Testing di Vue.js"><meta data-n-head="true" data-hid="twitter:description" name="twitter:description" content="Langkah-langkah memasang dan melakukan testing pada kode Vue.js dan Nuxt.js dengan belajar dari berbagai kasus yang terjadi pada proyek nyata"><meta data-n-head="true" data-hid="twitter:url" name="twitter:url" content="https://www.mazipan.xyz/drafts/panduan-unit-testing-di-vuejs/"><link data-n-head="true" rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link data-n-head="true" rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png"><link data-n-head="true" rel="icon" type="image/png" sizes="192x192" href="/favicon-192x192.png"><link data-n-head="true" rel="manifest" href="/_nuxt/manifest.65e4e6b5.json"><link data-n-head="true" rel="shortcut icon" href="/_nuxt/icons/icon_64.cj0eVBAp1eO.png"><link data-n-head="true" rel="apple-touch-icon" href="/_nuxt/icons/icon_512.cj0eVBAp1eO.png" sizes="512x512"><link rel="preload" href="/_nuxt/07ec355889d2e314dcb2.js" as="script"><link rel="preload" href="/_nuxt/3f42a658e1bb176d9851.js" as="script"><link rel="preload" href="/_nuxt/fcb9031aca68746a6f43.js" as="script"><link rel="preload" href="/_nuxt/767ff0b7254f7ad0f5c4.js" as="script"><link rel="preload" href="/_nuxt/c7db1302d5390062f854.js" as="script"><style data-vue-ssr-id="1341a011:0 75d58314:0 7f0a0617:0 17cfdfa9:0 7393fbb8:0 4bed00de:0 25c518fb:0 3e8c216a:0 5fe528f0:0 da40b256:0">/*! modern-normalize | MIT License | https://github.com/sindresorhus/modern-normalize */html{box-sizing:border-box}*,::after,::before{box-sizing:inherit}:root{-moz-tab-size:4;-o-tab-size:4;tab-size:4}html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol'}hr{height:0}abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:SFMono-Regular,Consolas,'Liberation Mono',Menlo,Courier,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{padding:0}progress{vertical-align:baseline}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}:root{--bg:#282a36;--bgLighter:#44475a;--textNormal:#f8f8f2;--textTitle:#50fa7b;--textSubtitle:#8be9fd;--textLink:#bd93f9;--textHighlight:#ff79c6;--textWarning:#f1fa8c;--textDanger:#ff5555;--textSecondary:#6272a4}body{font-family:'Merriweather Sans',-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-size:16px;word-spacing:1px;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;box-sizing:border-box;color:var(--textNormal);background-color:var(--bg)}.container{margin-left:auto;margin-right:auto;max-width:42rem;padding:2.625rem 1.3125rem}.clearfix::after{content:"";clear:both;display:table}a{color:var(--textLink);text-decoration:none}a:hover{text-decoration:underline}blockquote{font-style:italic;border-left:4px solid var(--textSecondary);color:var(--textSecondary);margin:0;padding:.25em 1em;font-size:110%}:not(pre)>code[class*=language-],pre[class*=language-]{border-radius:10px;box-shadow:0 4px 8px 0 rgba(0,0,0,.2)}code:not([class*=language-]){background-color:var(--bgLighter);color:var(--textLink);padding:.1em .5em;border-radius:.25em}small{font-size:80%}.flex{display:flex}.flex--center{align-items:center}.dot{padding:0 .5em}.meta{display:flex;align-items:center}.meta__date{color:var(--textSubtitle)}.text-normal{color:var(--textNormal)}.text-title{color:var(--textTitle)}.text-subtitle{color:var(--textSubtitle)}.text-link{color:var(--textLink)}.text-highlight{color:var(--textHighlight)}.text-warning{color:var(--textWarning)}.text-danger{color:var(--textDanger)}.text-secondary{color:var(--textSecondary)}.space-bottom{margin-bottom:1em}@-webkit-keyframes zoomIn{from{opacity:0;-webkit-transform:scale3d(.3,.3,.3);transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes zoomIn{from{opacity:0;-webkit-transform:scale3d(.3,.3,.3);transform:scale3d(.3,.3,.3)}50%{opacity:1}}.zoomIn{-webkit-animation-name:zoomIn;animation-name:zoomIn;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:both;animation-fill-mode:both}.ion{display:inline-flex}.ion__svg{fill:currentColor}@-webkit-keyframes ionShake{10%,90%{-webkit-transform:translate3d(-1px,0,0);transform:translate3d(-1px,0,0)}20%,80%{-webkit-transform:translate3d(2px,0,0);transform:translate3d(2px,0,0)}30%,50%,70%{-webkit-transform:translate3d(-4px,0,0);transform:translate3d(-4px,0,0)}40%,60%{-webkit-transform:translate3d(4px,0,0);transform:translate3d(4px,0,0)}}@keyframes ionShake{10%,90%{-webkit-transform:translate3d(-1px,0,0);transform:translate3d(-1px,0,0)}20%,80%{-webkit-transform:translate3d(2px,0,0);transform:translate3d(2px,0,0)}30%,50%,70%{-webkit-transform:translate3d(-4px,0,0);transform:translate3d(-4px,0,0)}40%,60%{-webkit-transform:translate3d(4px,0,0);transform:translate3d(4px,0,0)}}@-webkit-keyframes ionRotate{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes ionRotate{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes ionBeat{0%{-webkit-transform:scale(.75);transform:scale(.75)}20%{-webkit-transform:scale(1);transform:scale(1)}40%{-webkit-transform:scale(.75);transform:scale(.75)}60%{-webkit-transform:scale(1);transform:scale(1)}80%{-webkit-transform:scale(.75);transform:scale(.75)}100%{-webkit-transform:scale(.75);transform:scale(.75)}}@keyframes ionBeat{0%{-webkit-transform:scale(.75);transform:scale(.75)}20%{-webkit-transform:scale(1);transform:scale(1)}40%{-webkit-transform:scale(.75);transform:scale(.75)}60%{-webkit-transform:scale(1);transform:scale(1)}80%{-webkit-transform:scale(.75);transform:scale(.75)}100%{-webkit-transform:scale(.75);transform:scale(.75)}}.ion-beat{-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-name:ionBeat;animation-name:ionBeat;-webkit-animation-duration:.82s;animation-duration:.82s}.ion-shake{-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-name:ionShake;animation-name:ionShake;-webkit-animation-duration:.82s;animation-duration:.82s}.ion-rotate{-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-name:ionRotate;animation-name:ionRotate;-webkit-animation-duration:2s;animation-duration:2s}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:4px;width:0%;opacity:1;transition:width .1s,opacity .4s;background-color:#bd93f9;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}.wrapper[data-v-dcb18a4e]{margin:1em 0 3.5em 0;min-height:60vh}.header[data-v-36a1eb03]{margin-bottom:1rem}.page__title[data-v-76580de3]{font-size:2em;margin-bottom:.25em}.page__content[data-v-76580de3]{width:100%;word-break:break-word;margin:2em 0}.page__date[data-v-76580de3]{color:var(--textSubtitle)}.page__footer[data-v-76580de3]{margin:1em 0}.block-wrap[data-v-76580de3]{margin:1em 0;display:flex;justify-items:center;align-items:center}.like[data-v-76580de3],.share[data-v-76580de3]{display:flex}.like-btn[data-v-76580de3],.share-btn[data-v-76580de3]{color:var(--textNormal);background:var(--textLink);padding:.25em 1em;border-radius:.25em;border:0;outline:0;cursor:pointer;margin-right:1em;text-decoration:none;display:flex;justify-content:space-between;align-items:center}h2[data-v-49555ab4]{color:var(--textSubtitle)}a[data-v-49555ab4]{color:var(--textHighlight);text-decoration:underline}p[data-v-49555ab4]{line-height:1.5}img[data-v-49555ab4]{width:90%;height:auto;border-radius:10px;box-shadow:1px 1px 8px 5px rgba(0,0,0,.2)}.form .control[data-v-779ed735]{display:flex;margin-top:1em}.form .input[data-v-779ed735]{border:0;outline:0;background:#fff;font-size:16px;line-height:18px;height:40px;vertical-align:middle;width:250px;padding:.5em 1em;border-top-left-radius:.25em;border-bottom-left-radius:.25em}.form .btn[data-v-779ed735]{height:40px;border:0;outline:0;text-transform:none;font-size:14px;line-height:18px;background:var(--textLink);color:var(--textNormal);width:100px;border-top-right-radius:.25em;border-bottom-right-radius:.25em}.footer[data-v-0b210cae]{width:100%;margin:0 auto;text-align:center}</style>
  </head>
  <body data-n-head="">
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div class="container app" data-v-dcb18a4e><header class="header clearfix" data-v-36a1eb03 data-v-dcb18a4e><div class="header__block" data-v-36a1eb03><div class="header__child" data-v-36a1eb03><a href="/" class="nuxt-link-active" data-v-36a1eb03><h1 class="h1" data-v-36a1eb03>
          mazipan.xyz
        </h1></a> <div class="nav" data-v-36a1eb03><a href="/about">
    😎 About
  </a> <span class="dot"> • </span> <a href="/now">
    ⏰ Now
  </a> <span class="dot"> • </span> <a href="/archieves">
    📦 Archieves
  </a></div></div></div></header> <section class="page wrapper clearfix" data-v-76580de3 data-v-dcb18a4e><h1 class="page__title text-title" data-v-76580de3>
    Panduan Unit Testing di Vue.js
  </h1> <div class="meta" data-v-76580de3><small class="meta__date">
    📆 February 25, 2019
  </small> <small class="dot"> • </small> <small class="meta__read">☕️☕️☕️☕️ 20 min read</small> <small class="dot"> • </small> <small>
    ❤️ 0 likes
  </small> <small class="dot"> • </small> <small>
    📓 0 read
  </small></div> <div class="page__content" data-v-76580de3><div class="content-markdown" data-v-49555ab4 data-v-76580de3><h2 data-v-49555ab4>Mengenai Unit Testing</h2> <p data-v-49555ab4>Unit testing (UT) merupakan bagian terkecil dari proses pengetesan sebuah aplikasi perangkat lunak. UT berfokus untuk mengetest bagian terkecil sebuah aplikasi yakni potongan-potongan kode yang dibuat oleh pengembangnya, itu mengapa UT paling ideal dibuat oleh pengembang itu sendiri. Dengan mengetest kode-kode kecil di dalam sebuah aplikasi diharapkan kita bisa menghasilkan aplikasi perangkat lunak dengan kualitas yang lebih bisa dijamin.</p> <h2 data-v-49555ab4>Prinsip Utama</h2> <p data-v-49555ab4>Ada beberapa prinsip utama dalam melakukan unit testing, beberapa diantaranya yang dikenal dengan <strong data-v-49555ab4>FIRST</strong></p> <ol data-v-49555ab4><li data-v-49555ab4><strong data-v-49555ab4>F - Fast</strong> (Cepat), unit test harus bisa dieksekusi dengan cepat, tidak memakan waktu yang lebih lama dibandingkan ketika harus menjalankan aplikasi secara utuh untuk melakukan test manual.</li> <li data-v-49555ab4><strong data-v-49555ab4>I - Isolated</strong> (Dapat Diisolasi), unit test harus bisa diisolasi antar satu dengan yang lain, ketika terjadi kegagalan maka harus bisa dipastikan tidak merembet ke berkas testing pada bagian lain.</li> <li data-v-49555ab4><strong data-v-49555ab4>R - Repeatable</strong> (Dapat Diulang), unit testing harus bisa dijalankan kapan saja dan menghasilkan hasil yang sama. Tidak terikat pada hari tertentu, waktu tertentu atau zona waktu tertentu.</li> <li data-v-49555ab4><strong data-v-49555ab4>S - Self-Validating</strong> (Validasi Diri Sendiri),</li> <li data-v-49555ab4><strong data-v-49555ab4>T - Timely</strong> (Tepat Waktu), unit test seharusnya tidak menghabiskan terlalu banyak waktu untuk dibuat, keberadaannya tidak boleh memakan porsi dari pekerjaan yang harus diselesaikan.</li></ol> <h2 data-v-49555ab4>Beberapa Siklus Hidup Umum di Unit Test</h2> <ol data-v-49555ab4><li data-v-49555ab4>Setup</li> <li data-v-49555ab4>Test Execution</li> <li data-v-49555ab4>Teardown</li></ol> <h2 data-v-49555ab4>Memasang Unit Testing di Vue dan Nuxt</h2> <p data-v-49555ab4>Saya akan spesifik membahas bagaimana cara memasang Unit Test pada <em data-v-49555ab4>framework</em> <a href="https://jestjs.io/en/" data-v-49555ab4>Jest</a> beberapa kode yang akan saya sertakan pun akan spesifik pada Jest, bila Anda menggunakan <em data-v-49555ab4>framework</em> lain, bisa melihat pada referensi yang akan saya sertakan berikut:</p> <ul data-v-49555ab4><li data-v-49555ab4><a href="https://vue-test-utils.vuejs.org/guides/testing-single-file-components-with-mocha-webpack.html" data-v-49555ab4>Memasang unit test pada Mocha + Webpack</a></li> <li data-v-49555ab4><a href="https://vue-test-utils.vuejs.org/guides/testing-single-file-components-with-karma.html" data-v-49555ab4>Memasang unit test pada Karma</a></li></ul> <p data-v-49555ab4>Untuk Jest sendiri berikut cara memasang Unit Test pada beberapa projek:</p> <h3 data-v-49555ab4>Memasang Jest menggunakan Vue-CLI 3</h3> <ul data-v-49555ab4><li data-v-49555ab4>Pasang Vue-CLI 3 dengan perintah</li></ul> <pre data-v-49555ab4><code class="language-bash" data-v-49555ab4>yarn add @vue/cli

#atau

npm i -g @vue/cli
</code></pre> <ul data-v-49555ab4><li data-v-49555ab4><p data-v-49555ab4>Buat projek baru dengan <code data-v-49555ab4>vue create my-project-name</code>. Pilih <em data-v-49555ab4>"Manually select features"</em> dan centang "Unit Testing" dan "Jest" untuk runner unit testnya, silakan lihat artikel resmi <a href="https://cli.vuejs.org/guide/creating-a-project.html" data-v-49555ab4>membuat project baru dengan Vue-CLI</a> untuk lebih jelasnya.</p></li> <li data-v-49555ab4><p data-v-49555ab4>Jalankan unit test dengan perintah <code data-v-49555ab4>yarn test:unit</code> dan semua konfigurasi sudah dibuatkan oleh Vue-CLI tanpa kita harus melakukan secara manual.</p></li></ul> <h3 data-v-49555ab4>Memasang Jest pada tanpa Vue-CLI</h3> <p data-v-49555ab4>Pasang beberapa dependency untuk menjalankan unit test dengan jest berikut:</p> <pre data-v-49555ab4><code class="language-bash" data-v-49555ab4>yarn add jest babel-jest vue-jest @vue/test-utils -D

# atau

npm i jest babel-jest vue-jest @vue/test-utils --dev
</code></pre> <p data-v-49555ab4>Perintah tersebut akan menambahkan dependency berikut pada projek kita:</p> <ul data-v-49555ab4><li data-v-49555ab4><code data-v-49555ab4>jest</code></li> <li data-v-49555ab4><code data-v-49555ab4>babel-jest</code></li> <li data-v-49555ab4><code data-v-49555ab4>vue-jest</code></li> <li data-v-49555ab4><code data-v-49555ab4>@vue/test-utils</code></li></ul> <p data-v-49555ab4>Buat file konfigurasi untuk Jest dengan nama file <code data-v-49555ab4>jest.config.js</code> dengan isi konfigurasi sebagai berikut:</p> <pre data-v-49555ab4><code class="language-javascript" data-v-49555ab4>module.exports = {
  moduleNameMapper: {
    '^~/(.*)$': '&lt;rootDir>/$1',
    '^@/(.*)$': '&lt;rootDir>/$1',
    '^vue$': 'vue/dist/vue.common.js'
  },
  moduleFileExtensions: ['js', 'vue', 'json'],
  transform: {
    '^.+.js$': '&lt;rootDir>/node_modules/babel-jest',
    '^.+.vue$': '&lt;rootDir>/node_modules/vue-jest'
  }
}
</code></pre> <p data-v-49555ab4>Pada konfigurasi diatas, beberapa yang perlu kalian ketahui  seperti <code data-v-49555ab4>moduleNameMapper</code> merupakan <code data-v-49555ab4>alias</code> dari direktori kita seperti yang biasa kita lakukan di <code data-v-49555ab4>webpack</code>. Sementara <code data-v-49555ab4>transform</code> digunakan untuk men-transpile kode sebelum diproses oleh Jest, kita gunakan <code data-v-49555ab4>babel-jest</code> dan <code data-v-49555ab4>vue-jest</code> untuk membaca komponen berkas tunggal (<em data-v-49555ab4>single file komponen</em> - <strong data-v-49555ab4>SFC</strong>) pada Vue.</p> <p data-v-49555ab4>Karena kita menggunakan <code data-v-49555ab4>babel</code> juga pada unit test kita, maka jika belum ada konfigurasi babel pada projek kita, silakan tambahkan konfigurasi berikut:</p> <pre data-v-49555ab4><code class="language-javascript" data-v-49555ab4>// babel.config.js
module.exports = {
  presets: [
    [
      '@vue/app'
    ],
  ],
};
</code></pre> <p data-v-49555ab4>Selanjutnya kita bisa memasang <code data-v-49555ab4>script</code> tambahan pada <code data-v-49555ab4>package.json</code> kita seperti berikut:</p> <pre data-v-49555ab4><code class="language-javascript" data-v-49555ab4>{
  "scripts": {
    "test:unit": "jest"
  }
}
</code></pre> <p data-v-49555ab4>Secara default, jest akan menganggap semua file yang berekstensi <code data-v-49555ab4>.spec.js</code> atau <code data-v-49555ab4>.test.js</code> sebagai file unit test yang akan dijalankan pada saat perintah <code data-v-49555ab4>jest</code> diketikkan.</p> <h3 data-v-49555ab4>Memasang Jest pada Nuxt dengan <code data-v-49555ab4>create-nuxt-app</code></h3> <p data-v-49555ab4>Untuk memasang Jest pada Nuxt, bisa melalui <code data-v-49555ab4>create-nuxt-app</code> yang bisa dilakukan dengan perintah:</p> <pre data-v-49555ab4><code class="language-bash" data-v-49555ab4>yarn create nuxt-app my-project-name
# atau
npm init nuxt-app my-project-name
# atau
npx create-nuxt-app my-project-name
</code></pre> <p data-v-49555ab4>Pada pilihan "Choose your favorite test framework:", silakan pilih "Jest" sebagai unit test yang akan digunakan.</p> <p data-v-49555ab4>Jalankan unit test dengan perintah <code data-v-49555ab4>yarn test</code>.</p> <h3 data-v-49555ab4>Memasang Jest pada Nuxt secara manual</h3> <p data-v-49555ab4>Hampir tidak ada perbedaan dengan bagian <a href="#memasang-jest-pada-tanpa-vue-cli" data-v-49555ab4>Memasang Jest pada tanpa Vue-CLI</a> pada projek Vue biasa tanpa Nuxt. Perbedaan mungkin hanya ada pada konfigurasi <code data-v-49555ab4>babel</code>, karena pada Vue-CLI kita memanfaatkan babel presets dari Vue yang telah terpasang pada saat membuat projek Vue.</p> <p data-v-49555ab4>Kita cukup melakukan konfigurasi babel untuk environment "test" karena projek Nuxt sudah memiliki konfigurasi babel bawaan, seperti berikut contohnya:</p> <pre data-v-49555ab4><code class="language-javascript" data-v-49555ab4>{
  "env": {
    "test": {
      "presets": [
        [
          "@babel/preset-env",
          {
            "targets": {
              "node": "current"
            }
          }
        ]
      ]
    }
  }
}
</code></pre> <h2 data-v-49555ab4>Perbedaan Dasar Soal Nuxt dengan Vue</h2> <p data-v-49555ab4>Pada saat ingin membuat unit test untuk projek Nuxt dengan Vue ada beberapa perbedaan yang mesti kalian tau sebelumnya. Seperti kita tau bahwa Nuxt dibangun diatas Vue namun dengan banyak fitur bawaan yang mungkin saja tidak akan kalian temui pada projek Vue yang tanpa Nuxt. Beberapa perbedaan adalah Nuxt punya beberapa <code data-v-49555ab4>tag</code> spesial yang mirip dengan Vue namun tidak akan kalian temui disana, seperti beberapa tag berikut:</p> <pre data-v-49555ab4><code class="language-html" data-v-49555ab4>&lt;nuxt>&lt;/nuxt>
&lt;nuxt-child>&lt;/nuxt-child>
&lt;nuxt-link>&lt;/nuxt-link>
&lt;no-ssr>&lt;/no-ssr>
</code></pre> <p data-v-49555ab4>Selain itu Nuxt memiliki beberapa properti pada <code data-v-49555ab4>SFC</code> nya seperti berikut diantaranya:</p> <pre data-v-49555ab4><code class="language-javascript" data-v-49555ab4>export default {
  head () {},
  asyncData () {},
  fetch () {},
  nuxtServerInit () {},
  validate () {},
  middleware: '',
  layout: ''
}
</code></pre> <p data-v-49555ab4>Projek Nuxt tidak memiliki <code data-v-49555ab4>router.js</code> seperti yang biasanya kita buat di projek Vue, Nuxt akan menggunakan struktur folder untuk men-<em data-v-49555ab4>generate</em> berkas <code data-v-49555ab4>router.js</code> untuk projek kita yang letaknya ada di direktori <code data-v-49555ab4>.nuxt</code>.</p> <p data-v-49555ab4>Beberapa projek Nuxt juga tidak melakukan <em data-v-49555ab4>instance</em> secara manual terhadap storenya, seperti biasa kita lakukan dengan script seperti ini misalnya:</p> <pre data-v-49555ab4><code class="language-javascript" data-v-49555ab4>import Vuex from 'vuex'

const createStore = () => {
  return new Vuex.Store({
    state: () => ({
      counter: 0
    }),
    mutations: {
      increment (state) {
        state.counter++
      }
    }
  })
}

export default createStore
</code></pre> <p data-v-49555ab4>Dengan mengetahui beberapa perbedaan mendasar ini, nantinya akan berguna ketika kita menemui error yang sebelumnya tidak kita temui pada projek Vue namun ternyata kita temui pada projek Nuxt.</p> <h2 data-v-49555ab4>Testing JavaScript File Sederhana</h2> <p data-v-49555ab4>Untuk mengetest berkas JavaScript biasa tentu lebih mudah dibandingkan untuk melakukan test pada file <code data-v-49555ab4>SFC</code> Vue. Misalnya saja kita punya berkas <code data-v-49555ab4>helper</code> dengan nama berkas <code data-v-49555ab4>math-util.js</code>, di dalamnya terdapat kode seperti berikut:</p> <pre data-v-49555ab4><code class="language-javascript" data-v-49555ab4>export function add (a, b) {
  return a + b
}

export function min (a, b) {
  return a - b
}

export function increment (a) {
  return add(a, 1)
}

export function decrement (a) {
  return min(a, 1)
}
</code></pre> <p data-v-49555ab4>Maka kita bisa membuatkan berkas untuk unit test dengan nama <code data-v-49555ab4>math-util.spec.js</code> seperti berikut contohnya:</p> <pre data-v-49555ab4><code class="language-javascript" data-v-49555ab4>import { add, min, increment, decrement } from '@/helpers/math-util'

describe('math-util.js', () => {
  it('add function should return correct value', () => {
    expect(add(1, 2)).toBe(3)
    expect(add(2, 2)).toBe(4)
    expect(add(2, 3)).toBe(5)
    expect(add(3, 4)).toBe(7)
  })

  it('min function should return correct value', () => {
    expect(min(7, 1)).toBe(6)
    expect(min(5, 2)).toBe(3)
    expect(min(4, 3)).toBe(1)
    expect(min(3, 1)).toBe(2)
  })

  it('increment function should return correct value', () => {
    expect(increment(1)).toBe(2)
    expect(increment(5)).toBe(6)
    expect(increment(4)).toBe(5)
    expect(increment(8)).toBe(9)
  })

  it('decrement function should return correct value', () => {
    expect(decrement(2)).toBe(1)
    expect(decrement(5)).toBe(4)
    expect(decrement(4)).toBe(3)
    expect(decrement(8)).toBe(7)
  })
})
</code></pre> <h2 data-v-49555ab4>Testing Mounting Komponen Vue</h2> <p data-v-49555ab4>Dalam melakukan unit testing pada <strong data-v-49555ab4>SFC</strong>, hal pertama yang harus kita lakukan adalah memastikan kita berhasil memasang atau <em data-v-49555ab4>mounting</em> komponen tersebut ke dalam Virtual DOM yang ada di unit test runner. Terdengar mudah memang, tapi seringkali justru ini menjadi hal yang tersulit untuk dikerjakan karena setelah berhasil melakukan bagian ini biasanya bagian selanjutnya akan terasa lebih mudah. Untuk bisa melakukan <em data-v-49555ab4>mounting</em> kita diharuskan menyiapkan semua kebutuhan awal sebuah komponen tersebut agar bisa di-<em data-v-49555ab4>mounting</em>. Cara paling bar-bar yang biasa saya lakukan adalah dengan <em data-v-49555ab4>trial and error</em>, tapi bila kita telah terbiasa nanti kita bisa lebih mendeteksi lebih awal kebutuhan apa saja yang harus kita siapkan untuk <em data-v-49555ab4>mounting</em> komponen tersebut.</p> <p data-v-49555ab4>Saya beri contoh misalkan ada komponen dengan templat seperti berikut:</p> <pre data-v-49555ab4><code class="language-html" data-v-49555ab4>&lt;template>
  Hello world, {{ message }}
&lt;/template>
</code></pre> <p data-v-49555ab4>Dari templat tersebut, kita mesti mencari tau darimana datangnya nilai <code data-v-49555ab4>{{ message }}</code> karena ini dibutuhkan pada saat pertama kali komponen tersebut nantinya dipasang. Bila datang dari <code data-v-49555ab4>data ()</code> bisa jadi aman karena data akan otomatis terbuat ketika komponen dipasang, bila datang dari <code data-v-49555ab4>props</code> berarti kita perlu mengoper props tersebut juga pada unit test kita.</p> <p data-v-49555ab4>Untuk contoh yang akan kita gunakan dalam melakukan <em data-v-49555ab4>mounting</em> komponen di unit test akan mengikuti dari contoh yang dibuat oleh tim Vue melalui Vue-CLI yang di generate pada saat awal kita membuat projek baru, berikut contoh melakukan <em data-v-49555ab4>mounting</em> komponen di unit test:</p> <p data-v-49555ab4>katakanlah kita mempunyai berkas dengan nama <code data-v-49555ab4>HelloWorld.vue</code> yang berisi:</p> <pre data-v-49555ab4><code class="language-html" data-v-49555ab4>&lt;template>
  &lt;div class="hello">
    &lt;h1>{{ msg }}&lt;/h1>
    &lt;!-- banyak kode lain yang kita hilangkan karena dianggap tidak diperlukan -->
&lt;/template>

&lt;script>
export default {
  name: 'HelloWorld',
  props: {
    msg: String
  }
}
&lt;/script>
</code></pre> <p data-v-49555ab4>Maka pada berkas <code data-v-49555ab4>hello-world.spec.js</code> kita bisa membuat unit test sebagai berikut:</p> <pre data-v-49555ab4><code class="language-javascript" data-v-49555ab4>import { shallowMount } from '@vue/test-utils'
import HelloWorld from '@/components/HelloWorld.vue'

describe('HelloWorld.vue', () => {
  it('renders props.msg ketika dilempar', () => {
    const msg = 'new message'
    const wrapper = shallowMount(HelloWorld, {
      propsData: { msg }
    })
    expect(wrapper.text()).toMatch(msg)
  })
})
</code></pre> <p data-v-49555ab4>Dari kode diatas kita belajar dasar-dasar memasang komponen pada unit test menggunakan <code data-v-49555ab4>@vue/test-utils</code>, kita menggunakan API <code data-v-49555ab4>shallowMount</code> dibandingkan <code data-v-49555ab4>mount</code> karena kemampuan untuk memalsukan komponen anak sehingga kita tidak perlu mendefinisikan kebutuhan dari komponen anak dari komponen tersebut dan cukup fokus untuk mendefinisikan kebutuhan komponen terkait saja. Hal ini tentu selaras dengan prinsip <em data-v-49555ab4>isolated</em> pada unit testing. Pada contoh diatas kita menambahkan opsi <code data-v-49555ab4>propsData</code> untuk mengoper <code data-v-49555ab4>props</code> yang nanti akan kita bahas di bagian terpisah dibawah nanti.</p> <h2 data-v-49555ab4>Testing Method di Komponen Vue</h2> <p data-v-49555ab4>Setelah sebelumnya kita berhasil melakukan <em data-v-49555ab4>mounting</em>, maka tugas berikutnya akan lebih mudah seperti yang sudah kita bahas sebelumnya. Pada bagian sebelumnya kita hanya melakukan <em data-v-49555ab4>mounting</em> komponen tanpa memanggil <em data-v-49555ab4>method</em> apapun, berikut contoh memanggil <em data-v-49555ab4>method</em> dalam Vue <strong data-v-49555ab4>SFC</strong> melalui unit test:</p> <p data-v-49555ab4>Menggunkan berkas sebelumnya, kita akan menambahkan <em data-v-49555ab4>method</em> pada <strong data-v-49555ab4>SFC</strong>-nya dan melakukan sedikit perubahan seperti berikut:</p> <pre data-v-49555ab4><code class="language-html" data-v-49555ab4>&lt;template>
  &lt;div class="hello">
    &lt;h1>{{ msg }}&lt;/h1>
&lt;/template>

&lt;script>
export default {
  name: 'HelloWorld',
  data () {
    return {
      msg: 'Sebuah pesan'
    }
  },
  methods: {
    changeMessage (newMessage) {
      this.msg = newMessage
    }
  }
}
&lt;/script>
</code></pre> <p data-v-49555ab4>Dari kode diatas, kita bisa membuatkan unit test seperti berikut:</p> <pre data-v-49555ab4><code class="language-javascript" data-v-49555ab4>import { shallowMount } from '@vue/test-utils'
import HelloWorld from '@/components/HelloWorld.vue'

describe('HelloWorld.vue', () => {
  it('berhasil mounting komponen', () => {
    const msgExpected = 'Sebuah pesan'
    const wrapper = shallowMount(HelloWorld)
    expect(wrapper.vm.msg).toBe(msgExpected)
  })

  it('berhasil memanggil changeMessage', () => {
    const msgExpected = 'Sebuah pesan'
    const msgAfterChangeExpected = 'Sebuah pesan baru'
    const wrapper = shallowMount(HelloWorld)
    expect(wrapper.vm.msg).toBe(msgExpected)
    // memanggil method changeMessage
    wrapper.vm.changeMessage(msgAfterChangeExpected)
    expect(wrapper.vm.msg).toBe(msgExpected)
  })
})
</code></pre> <p data-v-49555ab4>Dari kode unit test diatas kita bisa mengetahui bahwa kita bisa langsung mengakses berbagai fitur Vue komponen lewat <code data-v-49555ab4>wrapper.vm</code>, ini sama saja seperti <code data-v-49555ab4>this</code> pada <strong data-v-49555ab4>SFC</strong> yang merujuk pada <em data-v-49555ab4>instance</em> dari komponen tersebut. Kita bisa mengakses <code data-v-49555ab4>data</code>, <code data-v-49555ab4>method</code>, <code data-v-49555ab4>props</code>, hasil dari <code data-v-49555ab4>computed</code> dan lainnya menggunakan <code data-v-49555ab4>wrapper.vm</code> yang merupakan fitur <code data-v-49555ab4>@vue/test-utils</code>.</p> <h2 data-v-49555ab4>Mensimulasikan Aksi Klik Elemen</h2> <p data-v-49555ab4>Beberapa programmer tidak senang melakukan akses langsung ke <em data-v-49555ab4>method</em> tanpa melalui akses ke tampilan pengguna. Seperti pada contoh sebelumnya, unit test tersebut menjadi tidak masuk akal karena method <code data-v-49555ab4>changeMessage</code> pada dasarnya tidak pernah digunakan oleh templat dan menjadi hal yang sia-sia karena kode tersebut tidak pernah mempengaruhi pengguna pada akhirnya.</p> <p data-v-49555ab4>Untuk mengakomodir hal ini, beberapa programmer lebih senang melakukan unit test dengan mensimulasikan apa yang harus dilakukan pengguna akhir pada aplikasi mereka tanpa mengakses ke <em data-v-49555ab4>method</em> secara langsung.</p> <p data-v-49555ab4>Dari contoh kode sebelumnya kita akan melakukan perubahan agar <em data-v-49555ab4>method</em> <code data-v-49555ab4>changeMessage</code> menjadi berguna, seperti berikut:</p> <pre data-v-49555ab4><code class="language-html" data-v-49555ab4>&lt;template>
  &lt;div class="hello">
    &lt;h1 class="message">{{ msg }}&lt;/h1>
    &lt;button
      class="btn"
      @click="changeMessage('Sebuah pesan baru')">
      Ubah pesan
    &lt;/button>
&lt;/template>

&lt;script>
export default {
  name: 'HelloWorld',
  data () {
    return {
      msg: 'Sebuah pesan'
    }
  },
  methods: {
    changeMessage (newMessage) {
      this.msg = newMessage
    }
  }
}
&lt;/script>
</code></pre> <p data-v-49555ab4>Dari kode diatas, kita bisa membuatkan unit test seperti berikut:</p> <pre data-v-49555ab4><code class="language-javascript" data-v-49555ab4>import { shallowMount } from '@vue/test-utils'
import HelloWorld from '@/components/HelloWorld.vue'

describe('HelloWorld.vue', () => {
  it('berhasil mounting komponen', () => {
    const msgExpected = 'Sebuah pesan'
    const wrapper = shallowMount(HelloWorld)
    expect(wrapper.find('.message')).toBe(msgExpected)
  })

  it('berhasil memanggil changeMessage melalui aksi klik', () => {
    const msgExpected = 'Sebuah pesan'
    const msgAfterChangeExpected = 'Sebuah pesan baru'
    const wrapper = shallowMount(HelloWorld)
    expect(wrapper.find('.message')).toBe(msgExpected)

    // memanggil method changeMessage lewat aksi klik
    const buttonElemen = wrapper.find('.btn')
    buttonWrapper.trigger('click')

    // mengecek perubahan setelah klik
    expect(wrapper.find('.message')).toBe(msgAfterChangeExpected)
  })
})
</code></pre> <p data-v-49555ab4>Bisa dilihat perbedaanya dari cara kita melakukan test pada bagian sebelumnya dengan cara kita melakukan test pada bagian ini, pada bagian ini kita benar-benar mensimulasikan bagaimana tampilan dari komponen ini nantinya akan digunakan oleh pengguna.</p> <p data-v-49555ab4>Kedua cara yang kita contohkan benar dan boleh saja dilakukan. Kita bahkan bisa mengerjakan kedua cara tersebut dalam satu berkas unit test. Pilihan terserah pada Anda masing-masing. Cara pertama tentu lebih cepat apalagi kalau mengejar <code data-v-49555ab4>coverage</code>, cara kedua lebih baik dan lebih berorientasi pada pengguna tapi seringkali menghabiskan lebih banyak waktu untuk dibuat.</p> <h2 data-v-49555ab4>Testing Props di Komponen Vue</h2> <p data-v-49555ab4>Sebelum melakukan test pada <code data-v-49555ab4>props</code>, kita mesti mengetahui terlebih dahulu bahwa <code data-v-49555ab4>props</code> adalah sebuah nilai yang dioper oleh komponen lain, nilainya berupa satu arah yang artinya tidak bisa kita ubah secara langsung dari komponen yang menerima <code data-v-49555ab4>props</code>, beberapa props sudah didefinisikan tipe data maupun struktur data yang diperbolehkan. Pada unit test kita bisa menggunakan fitur <code data-v-49555ab4>propsData</code> untuk melempar <code data-v-49555ab4>props</code> pada komponen tanpa perlu membuat komponen induk terlebih dahulu, berikut contoh membuat unit test pada <code data-v-49555ab4>props</code>:</p> <pre data-v-49555ab4><code class="language-html" data-v-49555ab4>&lt;template>
  &lt;div class="hello">
    &lt;h1>{{ msg }}&lt;/h1>
    &lt;h2>{{ num }}&lt;/h2>
    &lt;h3>{{ obj.name }}&lt;/h3>
    &lt;h4>{{ obj.desc }}&lt;/h4>
&lt;/template>

&lt;script>
export default {
  name: 'HelloWorld',
  props: {
    msg: String,
    num: {
      type: Number,
      default: 0
    },
    obj: {
      type: Object,
      default: () => ({
        name: '',
        desc: ''
      })
    },
  }
}
&lt;/script>
</code></pre> <p data-v-49555ab4>Maka kita bisa membuat unit test dari kode diatas sebagai berikut:</p> <pre data-v-49555ab4><code class="language-javascript" data-v-49555ab4>import { shallowMount } from '@vue/test-utils'
import HelloWorld from '@/components/HelloWorld.vue'

describe('HelloWorld.vue', () => {
  it('renders props.msg ketika dilempar', () => {
    const msgProp = 'sebuah pesan'
    const numProp = 12345
    const objProp = {
      name: 'sebuah nama',
      desc: 'sebuah deskripsi'
    }
    const wrapper = shallowMount(HelloWorld, {
      propsData: {
        msg: msgProp,
        num: numProp,
        obj: objProp,
      }
    })
    expect(wrapper.find('h1')).toBe(msgProp)
    expect(wrapper.find('h2')).toBe(numProp)
    expect(wrapper.find('h3')).toBe(objProp.name)
    expect(wrapper.find('h4')).toBe(objProp.desc)
  })
})
</code></pre> <h2 data-v-49555ab4>Testing Computed dan Watcher</h2> <p data-v-49555ab4>Untuk melakukan test pada <code data-v-49555ab4>computed</code> dan <code data-v-49555ab4>watch</code> kita perlu mengetahui apa yang sebenarnya dilakukan keduanya di dalam Vue <strong data-v-49555ab4>SFC</strong>. Kita akan memahami mengenai dua hal ini lewat contoh kode berikut:</p> <pre data-v-49555ab4><code class="language-javascript" data-v-49555ab4>export default {
  data () {
    return {
      firstName: 'Irfan',
      lastName: 'Maulana'
    }
  },
  computed: {
    fullName () {
      return `${this.firstName} ${this.lastName}`
    }
  }
}
</code></pre> <p data-v-49555ab4>Kode yang sama bila kita selesaikan dengan <code data-v-49555ab4>watch</code> akan menjadi:</p> <pre data-v-49555ab4><code class="language-javascript" data-v-49555ab4>export default {
  data () {
    return {
      firstName: 'Irfan',
      lastName: 'Maulana',
      fullName: '',
    }
  },
  watch: {
    firstName (newValue) {
      this.fullName = `${newValue} ${this.lastName}`
    },
    lastName (newValue) {
      this.fullName = `${this.firstName} ${newValue}`
    }
  }
}
</code></pre> <p data-v-49555ab4>Dari contoh kode diatas, kita bisa tau bahwa <code data-v-49555ab4>computed</code> akan mengkalkulasikan ulang nilainya pada saat suatu variabel yang digunakan dibawah fungsi <code data-v-49555ab4>computed</code> mengalami perubahan. Ciri khas dari <code data-v-49555ab4>computed</code> sendiri adalah selalu mengambalikan nilai baru yang akan menjadi bagian dari <code data-v-49555ab4>data</code>, meskipun begitu nilai dari <code data-v-49555ab4>computed</code> tidak bisa kita ubah secara langsung. Nilainya hanya bisa diubah dengan melakukan perubahan pada variabel yang digunakan oleh <code data-v-49555ab4>computed</code> tersebut. Sedangkan pada <code data-v-49555ab4>watch</code> sama-sama akan dijalankan ketika terjadi perubahan pada variabel di dalamnya, hanya saja <code data-v-49555ab4>watch</code> tidak akan mengembalikan nilai baru yang bisa kita gunakan.</p> <p data-v-49555ab4>Berikut contoh kode untuk membuat unit test pada <code data-v-49555ab4>computed</code> dan <code data-v-49555ab4>watch</code>:</p> <pre data-v-49555ab4><code class="language-javascript" data-v-49555ab4>&lt;template>
  &lt;h1>{{ fullName }}&lt;/h1>
&lt;/template>

&lt;script>
export default {
  data () {
    return {
      firstName: 'Irfan',
      lastName: 'Maulana'
    }
  },
  computed: {
    fullName () {
      return `${this.firstName} ${this.lastName}`
    }
  }
}
&lt;/script>
</code></pre> <p data-v-49555ab4>Dari kode tersebut kita membuat unit test berikut:</p> <pre data-v-49555ab4><code class="language-javascript" data-v-49555ab4>import { shallowMount } from '@vue/test-utils'
import HelloWorld from '@/components/HelloWorld.vue'

describe('HelloWorld.vue', () => {
  it('computed seharusnya ter-trigger', () => {
    const wrapper = shallowMount(HelloWorld)
    expect(wrapper.find('h1')).toBe('Irfan Maulana')

    // nilai firstName dan lastName akan kita ubah
    wrapper.vm.firstName = 'Syamil'
    wrapper.vm.lastName = 'Al-Khawarizmi'

    // mengecek perubahan
    expect(wrapper.find('h1')).toBe('Syamil Al-Khawarizmi')
  })
})
</code></pre> <p data-v-49555ab4>Pada kasus menggunakan <code data-v-49555ab4>watch</code> bisa dilihat pada contoh kasus berikut:</p> <pre data-v-49555ab4><code class="language-javascript" data-v-49555ab4>&lt;template>
  &lt;h1>{{ fullName }}&lt;/h1>
&lt;/template>

&lt;script>
export default {
  data () {
    return {
      firstName: 'Irfan',
      lastName: 'Maulana',
      fullName: '',
    }
  },
  watch: {
    firstName (newValue) {
      this.fullName = `${newValue} ${this.lastName}`
    },
    lastName (newValue) {
      this.fullName = `${this.firstName} ${newValue}`
    }
  }
}
&lt;/script>
</code></pre> <p data-v-49555ab4>Dari kode tersebut kita membuat unit test berikut:</p> <pre data-v-49555ab4><code class="language-javascript" data-v-49555ab4>import { shallowMount } from '@vue/test-utils'
import HelloWorld from '@/components/HelloWorld.vue'

describe('HelloWorld.vue', () => {
  it('watch seharusnya ter-trigger', () => {
    const wrapper = shallowMount(HelloWorld)
    expect(wrapper.find('h1')).toBe('Irfan Maulana')

    // nilai firstName dan lastName akan kita ubah
    wrapper.vm.firstName = 'Syamil'
    wrapper.vm.lastName = 'Al-Khawarizmi'

    // mengecek perubahan
    expect(wrapper.find('h1')).toBe('Syamil Al-Khawarizmi')
  })
})
</code></pre> <h2 data-v-49555ab4>Testing Event Emitter</h2> <p data-v-49555ab4>Seringkali pada sebuah komponen kita harus melakukan <code data-v-49555ab4>$emit</code> terhadap <em data-v-49555ab4>event</em> yang dilempar oleh komponen induknya. Masalahnya adalah ketika kita mengetest komponen anak yang seperti ini, kita sebenarnya tidak pernah tau <em data-v-49555ab4>event</em> seperti apa yang akan dilempar oleh komponen induknya. Ketidakpunyaan penglihatan kita terhadap aksi sejenis ini membuat kita tidak bisa melakukan test yang bisa kita pastikan hasilnya, karenanya kita biasanya cuma akan melakukan <code data-v-49555ab4>Spy</code> terhadap fungsi seperti ini. Untungnya dari <code data-v-49555ab4>@vue/test-utils</code> sudah menyediakan API yang memudahkan kita melakukan ini yakni <a href="https://vue-test-utils.vuejs.org/api/wrapper/emitted.html" data-v-49555ab4>emitted</a>.</p> <p data-v-49555ab4>Contoh menggunakan <code data-v-49555ab4>emitted</code> sebagai berikut, misalkan kita memiliki kode:</p> <pre data-v-49555ab4><code class="language-javascript" data-v-49555ab4>export default {
  methods: {
    emitSomething () {
      this.$emit('foo', 123)
    }
  }
}
</code></pre> <p data-v-49555ab4>Maka kita bisa membuatkan unit test sebagai berikut:</p> <pre data-v-49555ab4><code class="language-javascript" data-v-49555ab4>import { shallowMount } from '@vue/test-utils'
import HelloWorld from '@/components/HelloWorld.vue'

describe('HelloWorld.vue', () => {
  it('memanggil $emit', () => {
    const wrapper = shallowMount(HelloWorld)
    wrapper.vm.emitSomething()
    expect(wrapper.emitted().foo).toBeTruthy()
    expect(wrapper.emitted('foo')).toBeTruthy()
  })
})
</code></pre> <h2 data-v-49555ab4>Testing Perpindahan Route</h2> <p data-v-49555ab4>Terkadang pada sebuah projek kita diharuskan melakukan manipulasi <code data-v-49555ab4>route</code> pada sebuah seperti menggunakan <code data-v-49555ab4>router.push</code>, <code data-v-49555ab4>router.go</code> atau lainnya. Sebelum kita melakukan test pada kode seperti ini, kita paling tidak mesti tau apa yang terjadi ketika kita melakukan manipulasi <code data-v-49555ab4>router</code> di Vue. Vue memanfaatkan pustaka tambahan yakni <code data-v-49555ab4>Vue Router</code> untuk melakukan manipulasi <code data-v-49555ab4>router</code> yang mana diurus secara resmi oleh tim yang sama dengan yang membuat Vue inti.</p> <p data-v-49555ab4>Ada dua objek yang harus kita tau ketika menggunakan <code data-v-49555ab4>Vue Router</code> yakni, <code data-v-49555ab4>route</code> yang bisa diakses lewat <strong data-v-49555ab4>SFC</strong> melalui <code data-v-49555ab4>this.$route</code> dan juga <code data-v-49555ab4>router</code> yang bisa diakses melalui <code data-v-49555ab4>this.$router</code>. <code data-v-49555ab4>Route</code> adalah representasi posisi halaman saat ini, berupa objek yang berisi <code data-v-49555ab4>path</code>, <code data-v-49555ab4>name</code>, <code data-v-49555ab4>query</code> dan sebagainya. Sementara <code data-v-49555ab4>Router</code> merupakan objek yang bisa memanipulasi posisi <code data-v-49555ab4>route</code> tersebut. Jadi kita akan mengakses <code data-v-49555ab4>router</code> untuk mengubah <code data-v-49555ab4>route</code> dan akan mengecek <code data-v-49555ab4>route</code> untuk mengetahui apakah manipulasi tersebut berhasil ataukah tidak.</p> <p data-v-49555ab4>Contoh kode berikut akan memberikan gambaran mengenai dua hal tersebut:</p> <pre data-v-49555ab4><code class="language-javascript" data-v-49555ab4>export default {
  methods: {
    changeRoute () {
      this.$router.push('/')
      // console.log(this.$route.path)
      // akan mencetak nilai /
      this.$router.push('/foo')
      // console.log(this.$route.path)
      // akan mencetak nilai /foo
      this.$router.push('/bar')
      // console.log(this.$route.path)
      // akan mencetak nilai /bar
    }
  }
}
</code></pre> <h2 data-v-49555ab4>Testing Vuex</h2> <h2 data-v-49555ab4>Testing Dengan Vue-i18n</h2> <h2 data-v-49555ab4>Testing Pemanggilan API</h2> <hr data-v-49555ab4> <p data-v-49555ab4>References:</p> <ol data-v-49555ab4><li data-v-49555ab4><a href="https://www.guru99.com/unit-testing-guide.html" data-v-49555ab4>https://www.guru99.com/unit-testing-guide.html</a></li> <li data-v-49555ab4><a href="https://lmiller1990.github.io/vue-testing-handbook/" data-v-49555ab4>https://lmiller1990.github.io/vue-testing-handbook/</a></li> <li data-v-49555ab4><a href="https://vue-test-utils.vuejs.org/" data-v-49555ab4>https://vue-test-utils.vuejs.org/</a></li></ol></div> <a target="_blank" rel="noopener" title="Edit in Github" href="https://github.com/mazipan/blog-2.0/edit/master/contents/drafts/panduan-unit-testing-di-vuejs/index.md" data-v-76580de3>
      📝 Edit in Github
    </a></div></section> <hr data-v-dcb18a4e> <div class="clearfix" style="margin-bottom:2em" data-v-dcb18a4e><div data-v-779ed735 data-v-dcb18a4e><h3 data-v-779ed735>📧 Get the newsletter</h3> <form name="contact" method="POST" data-netlify="true" action="/success-subscribed" class="form" data-v-779ed735><input type="hidden" name="form-name" value="contact" data-v-779ed735> <label for="form-email" data-v-779ed735>Subscribe here to get the latest article by email.</label> <div class="control" data-v-779ed735><input id="form-email" type="email" name="email" required placeholder="Your email address" class="input" data-v-779ed735> <button type="submit" class="btn" data-v-779ed735>
        Submit
      </button></div></form></div></div> <footer class="footer clearfix" data-v-0b210cae data-v-dcb18a4e><span data-v-0b210cae>Copyright © 2019 by</span> <a href="http://github.com/mazipan" title="Github" target="_blank" rel="noopener" data-v-0b210cae>Irfan Maulana</a> <br data-v-0b210cae> <span data-v-0b210cae>See source code in </span> <a href="https://github.com/mazipan/blog-2.0" title="Github Blog 2.0" target="_blank" rel="noopener" data-v-0b210cae>Github</a></footer></div></div></div><script>window.__NUXT__={layout:"default",data:[{meta:{title:"Panduan Unit Testing di Vue.js",slug:"panduan-unit-testing-di-vuejs",date:"2019-02-25",minute2read:20,description:"Langkah-langkah memasang dan melakukan testing pada kode Vue.js dan Nuxt.js dengan belajar dari berbagai kasus yang terjadi pada proyek nyata"},renderFn:"return function render() { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0) }",staticRenderFn:'return [function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'div\',{staticClass:"content-markdown"},[_c(\'h2\',[_vm._v("Mengenai Unit Testing")]),_vm._v(" "),_c(\'p\',[_vm._v("Unit testing (UT) merupakan bagian terkecil dari proses pengetesan sebuah aplikasi perangkat lunak. UT berfokus untuk mengetest bagian terkecil sebuah aplikasi yakni potongan-potongan kode yang dibuat oleh pengembangnya, itu mengapa UT paling ideal dibuat oleh pengembang itu sendiri. Dengan mengetest kode-kode kecil di dalam sebuah aplikasi diharapkan kita bisa menghasilkan aplikasi perangkat lunak dengan kualitas yang lebih bisa dijamin.")]),_vm._v(" "),_c(\'h2\',[_vm._v("Prinsip Utama")]),_vm._v(" "),_c(\'p\',[_vm._v("Ada beberapa prinsip utama dalam melakukan unit testing, beberapa diantaranya yang dikenal dengan "),_c(\'strong\',[_vm._v("FIRST")])]),_vm._v(" "),_c(\'ol\',[_c(\'li\',[_c(\'strong\',[_vm._v("F - Fast")]),_vm._v(" (Cepat), unit test harus bisa dieksekusi dengan cepat, tidak memakan waktu yang lebih lama dibandingkan ketika harus menjalankan aplikasi secara utuh untuk melakukan test manual.")]),_vm._v(" "),_c(\'li\',[_c(\'strong\',[_vm._v("I - Isolated")]),_vm._v(" (Dapat Diisolasi), unit test harus bisa diisolasi antar satu dengan yang lain, ketika terjadi kegagalan maka harus bisa dipastikan tidak merembet ke berkas testing pada bagian lain.")]),_vm._v(" "),_c(\'li\',[_c(\'strong\',[_vm._v("R - Repeatable")]),_vm._v(" (Dapat Diulang), unit testing harus bisa dijalankan kapan saja dan menghasilkan hasil yang sama. Tidak terikat pada hari tertentu, waktu tertentu atau zona waktu tertentu.")]),_vm._v(" "),_c(\'li\',[_c(\'strong\',[_vm._v("S - Self-Validating")]),_vm._v(" (Validasi Diri Sendiri),")]),_vm._v(" "),_c(\'li\',[_c(\'strong\',[_vm._v("T - Timely")]),_vm._v(" (Tepat Waktu), unit test seharusnya tidak menghabiskan terlalu banyak waktu untuk dibuat, keberadaannya tidak boleh memakan porsi dari pekerjaan yang harus diselesaikan.")])]),_vm._v(" "),_c(\'h2\',[_vm._v("Beberapa Siklus Hidup Umum di Unit Test")]),_vm._v(" "),_c(\'ol\',[_c(\'li\',[_vm._v("Setup")]),_vm._v(" "),_c(\'li\',[_vm._v("Test Execution")]),_vm._v(" "),_c(\'li\',[_vm._v("Teardown")])]),_vm._v(" "),_c(\'h2\',[_vm._v("Memasang Unit Testing di Vue dan Nuxt")]),_vm._v(" "),_c(\'p\',[_vm._v("Saya akan spesifik membahas bagaimana cara memasang Unit Test pada "),_c(\'em\',[_vm._v("framework")]),_vm._v(" "),_c(\'a\',{attrs:{"href":"https://jestjs.io/en/"}},[_vm._v("Jest")]),_vm._v(" beberapa kode yang akan saya sertakan pun akan spesifik pada Jest, bila Anda menggunakan "),_c(\'em\',[_vm._v("framework")]),_vm._v(" lain, bisa melihat pada referensi yang akan saya sertakan berikut:")]),_vm._v(" "),_c(\'ul\',[_c(\'li\',[_c(\'a\',{attrs:{"href":"https://vue-test-utils.vuejs.org/guides/testing-single-file-components-with-mocha-webpack.html"}},[_vm._v("Memasang unit test pada Mocha + Webpack")])]),_vm._v(" "),_c(\'li\',[_c(\'a\',{attrs:{"href":"https://vue-test-utils.vuejs.org/guides/testing-single-file-components-with-karma.html"}},[_vm._v("Memasang unit test pada Karma")])])]),_vm._v(" "),_c(\'p\',[_vm._v("Untuk Jest sendiri berikut cara memasang Unit Test pada beberapa projek:")]),_vm._v(" "),_c(\'h3\',[_vm._v("Memasang Jest menggunakan Vue-CLI 3")]),_vm._v(" "),_c(\'ul\',[_c(\'li\',[_vm._v("Pasang Vue-CLI 3 dengan perintah")])]),_vm._v(" "),_c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-bash"}},[_vm._v("yarn add @vue/cli\\n\\n#atau\\n\\nnpm i -g @vue/cli\\n")])]),_vm._v(" "),_c(\'ul\',[_c(\'li\',[_c(\'p\',[_vm._v("Buat projek baru dengan "),_c(\'code\',{pre:true},[_vm._v("vue create my-project-name")]),_vm._v(". Pilih "),_c(\'em\',[_vm._v("\\"Manually select features\\"")]),_vm._v(" dan centang \\"Unit Testing\\" dan \\"Jest\\" untuk runner unit testnya, silakan lihat artikel resmi "),_c(\'a\',{attrs:{"href":"https://cli.vuejs.org/guide/creating-a-project.html"}},[_vm._v("membuat project baru dengan Vue-CLI")]),_vm._v(" untuk lebih jelasnya.")])]),_vm._v(" "),_c(\'li\',[_c(\'p\',[_vm._v("Jalankan unit test dengan perintah "),_c(\'code\',{pre:true},[_vm._v("yarn test:unit")]),_vm._v(" dan semua konfigurasi sudah dibuatkan oleh Vue-CLI tanpa kita harus melakukan secara manual.")])])]),_vm._v(" "),_c(\'h3\',[_vm._v("Memasang Jest pada tanpa Vue-CLI")]),_vm._v(" "),_c(\'p\',[_vm._v("Pasang beberapa dependency untuk menjalankan unit test dengan jest berikut:")]),_vm._v(" "),_c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-bash"}},[_vm._v("yarn add jest babel-jest vue-jest @vue/test-utils -D\\n\\n# atau\\n\\nnpm i jest babel-jest vue-jest @vue/test-utils --dev\\n")])]),_vm._v(" "),_c(\'p\',[_vm._v("Perintah tersebut akan menambahkan dependency berikut pada projek kita:")]),_vm._v(" "),_c(\'ul\',[_c(\'li\',[_c(\'code\',{pre:true},[_vm._v("jest")])]),_vm._v(" "),_c(\'li\',[_c(\'code\',{pre:true},[_vm._v("babel-jest")])]),_vm._v(" "),_c(\'li\',[_c(\'code\',{pre:true},[_vm._v("vue-jest")])]),_vm._v(" "),_c(\'li\',[_c(\'code\',{pre:true},[_vm._v("@vue/test-utils")])])]),_vm._v(" "),_c(\'p\',[_vm._v("Buat file konfigurasi untuk Jest dengan nama file "),_c(\'code\',{pre:true},[_vm._v("jest.config.js")]),_vm._v(" dengan isi konfigurasi sebagai berikut:")]),_vm._v(" "),_c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-javascript"}},[_vm._v("module.exports = {\\n  moduleNameMapper: {\\n    \'^~/(.*)$\': \'<rootDir>/$1\',\\n    \'^@/(.*)$\': \'<rootDir>/$1\',\\n    \'^vue$\': \'vue/dist/vue.common.js\'\\n  },\\n  moduleFileExtensions: [\'js\', \'vue\', \'json\'],\\n  transform: {\\n    \'^.+.js$\': \'<rootDir>/node_modules/babel-jest\',\\n    \'^.+.vue$\': \'<rootDir>/node_modules/vue-jest\'\\n  }\\n}\\n")])]),_vm._v(" "),_c(\'p\',[_vm._v("Pada konfigurasi diatas, beberapa yang perlu kalian ketahui  seperti "),_c(\'code\',{pre:true},[_vm._v("moduleNameMapper")]),_vm._v(" merupakan "),_c(\'code\',{pre:true},[_vm._v("alias")]),_vm._v(" dari direktori kita seperti yang biasa kita lakukan di "),_c(\'code\',{pre:true},[_vm._v("webpack")]),_vm._v(". Sementara "),_c(\'code\',{pre:true},[_vm._v("transform")]),_vm._v(" digunakan untuk men-transpile kode sebelum diproses oleh Jest, kita gunakan "),_c(\'code\',{pre:true},[_vm._v("babel-jest")]),_vm._v(" dan "),_c(\'code\',{pre:true},[_vm._v("vue-jest")]),_vm._v(" untuk membaca komponen berkas tunggal ("),_c(\'em\',[_vm._v("single file komponen")]),_vm._v(" - "),_c(\'strong\',[_vm._v("SFC")]),_vm._v(") pada Vue.")]),_vm._v(" "),_c(\'p\',[_vm._v("Karena kita menggunakan "),_c(\'code\',{pre:true},[_vm._v("babel")]),_vm._v(" juga pada unit test kita, maka jika belum ada konfigurasi babel pada projek kita, silakan tambahkan konfigurasi berikut:")]),_vm._v(" "),_c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-javascript"}},[_vm._v("// babel.config.js\\nmodule.exports = {\\n  presets: [\\n    [\\n      \'@vue/app\'\\n    ],\\n  ],\\n};\\n")])]),_vm._v(" "),_c(\'p\',[_vm._v("Selanjutnya kita bisa memasang "),_c(\'code\',{pre:true},[_vm._v("script")]),_vm._v(" tambahan pada "),_c(\'code\',{pre:true},[_vm._v("package.json")]),_vm._v(" kita seperti berikut:")]),_vm._v(" "),_c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-javascript"}},[_vm._v("{\\n  \\"scripts\\": {\\n    \\"test:unit\\": \\"jest\\"\\n  }\\n}\\n")])]),_vm._v(" "),_c(\'p\',[_vm._v("Secara default, jest akan menganggap semua file yang berekstensi "),_c(\'code\',{pre:true},[_vm._v(".spec.js")]),_vm._v(" atau "),_c(\'code\',{pre:true},[_vm._v(".test.js")]),_vm._v(" sebagai file unit test yang akan dijalankan pada saat perintah "),_c(\'code\',{pre:true},[_vm._v("jest")]),_vm._v(" diketikkan.")]),_vm._v(" "),_c(\'h3\',[_vm._v("Memasang Jest pada Nuxt dengan "),_c(\'code\',{pre:true},[_vm._v("create-nuxt-app")])]),_vm._v(" "),_c(\'p\',[_vm._v("Untuk memasang Jest pada Nuxt, bisa melalui "),_c(\'code\',{pre:true},[_vm._v("create-nuxt-app")]),_vm._v(" yang bisa dilakukan dengan perintah:")]),_vm._v(" "),_c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-bash"}},[_vm._v("yarn create nuxt-app my-project-name\\n# atau\\nnpm init nuxt-app my-project-name\\n# atau\\nnpx create-nuxt-app my-project-name\\n")])]),_vm._v(" "),_c(\'p\',[_vm._v("Pada pilihan \\"Choose your favorite test framework:\\", silakan pilih \\"Jest\\" sebagai unit test yang akan digunakan.")]),_vm._v(" "),_c(\'p\',[_vm._v("Jalankan unit test dengan perintah "),_c(\'code\',{pre:true},[_vm._v("yarn test")]),_vm._v(".")]),_vm._v(" "),_c(\'h3\',[_vm._v("Memasang Jest pada Nuxt secara manual")]),_vm._v(" "),_c(\'p\',[_vm._v("Hampir tidak ada perbedaan dengan bagian "),_c(\'a\',{attrs:{"href":"#memasang-jest-pada-tanpa-vue-cli"}},[_vm._v("Memasang Jest pada tanpa Vue-CLI")]),_vm._v(" pada projek Vue biasa tanpa Nuxt. Perbedaan mungkin hanya ada pada konfigurasi "),_c(\'code\',{pre:true},[_vm._v("babel")]),_vm._v(", karena pada Vue-CLI kita memanfaatkan babel presets dari Vue yang telah terpasang pada saat membuat projek Vue.")]),_vm._v(" "),_c(\'p\',[_vm._v("Kita cukup melakukan konfigurasi babel untuk environment \\"test\\" karena projek Nuxt sudah memiliki konfigurasi babel bawaan, seperti berikut contohnya:")]),_vm._v(" "),_c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-javascript"}},[_vm._v("{\\n  \\"env\\": {\\n    \\"test\\": {\\n      \\"presets\\": [\\n        [\\n          \\"@babel/preset-env\\",\\n          {\\n            \\"targets\\": {\\n              \\"node\\": \\"current\\"\\n            }\\n          }\\n        ]\\n      ]\\n    }\\n  }\\n}\\n")])]),_vm._v(" "),_c(\'h2\',[_vm._v("Perbedaan Dasar Soal Nuxt dengan Vue")]),_vm._v(" "),_c(\'p\',[_vm._v("Pada saat ingin membuat unit test untuk projek Nuxt dengan Vue ada beberapa perbedaan yang mesti kalian tau sebelumnya. Seperti kita tau bahwa Nuxt dibangun diatas Vue namun dengan banyak fitur bawaan yang mungkin saja tidak akan kalian temui pada projek Vue yang tanpa Nuxt. Beberapa perbedaan adalah Nuxt punya beberapa "),_c(\'code\',{pre:true},[_vm._v("tag")]),_vm._v(" spesial yang mirip dengan Vue namun tidak akan kalian temui disana, seperti beberapa tag berikut:")]),_vm._v(" "),_c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-html"}},[_vm._v("<nuxt></nuxt>\\n<nuxt-child></nuxt-child>\\n<nuxt-link></nuxt-link>\\n<no-ssr></no-ssr>\\n")])]),_vm._v(" "),_c(\'p\',[_vm._v("Selain itu Nuxt memiliki beberapa properti pada "),_c(\'code\',{pre:true},[_vm._v("SFC")]),_vm._v(" nya seperti berikut diantaranya:")]),_vm._v(" "),_c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-javascript"}},[_vm._v("export default {\\n  head () {},\\n  asyncData () {},\\n  fetch () {},\\n  nuxtServerInit () {},\\n  validate () {},\\n  middleware: \'\',\\n  layout: \'\'\\n}\\n")])]),_vm._v(" "),_c(\'p\',[_vm._v("Projek Nuxt tidak memiliki "),_c(\'code\',{pre:true},[_vm._v("router.js")]),_vm._v(" seperti yang biasanya kita buat di projek Vue, Nuxt akan menggunakan struktur folder untuk men-"),_c(\'em\',[_vm._v("generate")]),_vm._v(" berkas "),_c(\'code\',{pre:true},[_vm._v("router.js")]),_vm._v(" untuk projek kita yang letaknya ada di direktori "),_c(\'code\',{pre:true},[_vm._v(".nuxt")]),_vm._v(".")]),_vm._v(" "),_c(\'p\',[_vm._v("Beberapa projek Nuxt juga tidak melakukan "),_c(\'em\',[_vm._v("instance")]),_vm._v(" secara manual terhadap storenya, seperti biasa kita lakukan dengan script seperti ini misalnya:")]),_vm._v(" "),_c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-javascript"}},[_vm._v("import Vuex from \'vuex\'\\n\\nconst createStore = () => {\\n  return new Vuex.Store({\\n    state: () => ({\\n      counter: 0\\n    }),\\n    mutations: {\\n      increment (state) {\\n        state.counter++\\n      }\\n    }\\n  })\\n}\\n\\nexport default createStore\\n")])]),_vm._v(" "),_c(\'p\',[_vm._v("Dengan mengetahui beberapa perbedaan mendasar ini, nantinya akan berguna ketika kita menemui error yang sebelumnya tidak kita temui pada projek Vue namun ternyata kita temui pada projek Nuxt.")]),_vm._v(" "),_c(\'h2\',[_vm._v("Testing JavaScript File Sederhana")]),_vm._v(" "),_c(\'p\',[_vm._v("Untuk mengetest berkas JavaScript biasa tentu lebih mudah dibandingkan untuk melakukan test pada file "),_c(\'code\',{pre:true},[_vm._v("SFC")]),_vm._v(" Vue. Misalnya saja kita punya berkas "),_c(\'code\',{pre:true},[_vm._v("helper")]),_vm._v(" dengan nama berkas "),_c(\'code\',{pre:true},[_vm._v("math-util.js")]),_vm._v(", di dalamnya terdapat kode seperti berikut:")]),_vm._v(" "),_c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-javascript"}},[_vm._v("export function add (a, b) {\\n  return a + b\\n}\\n\\nexport function min (a, b) {\\n  return a - b\\n}\\n\\nexport function increment (a) {\\n  return add(a, 1)\\n}\\n\\nexport function decrement (a) {\\n  return min(a, 1)\\n}\\n")])]),_vm._v(" "),_c(\'p\',[_vm._v("Maka kita bisa membuatkan berkas untuk unit test dengan nama "),_c(\'code\',{pre:true},[_vm._v("math-util.spec.js")]),_vm._v(" seperti berikut contohnya:")]),_vm._v(" "),_c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-javascript"}},[_vm._v("import { add, min, increment, decrement } from \'@/helpers/math-util\'\\n\\ndescribe(\'math-util.js\', () => {\\n  it(\'add function should return correct value\', () => {\\n    expect(add(1, 2)).toBe(3)\\n    expect(add(2, 2)).toBe(4)\\n    expect(add(2, 3)).toBe(5)\\n    expect(add(3, 4)).toBe(7)\\n  })\\n\\n  it(\'min function should return correct value\', () => {\\n    expect(min(7, 1)).toBe(6)\\n    expect(min(5, 2)).toBe(3)\\n    expect(min(4, 3)).toBe(1)\\n    expect(min(3, 1)).toBe(2)\\n  })\\n\\n  it(\'increment function should return correct value\', () => {\\n    expect(increment(1)).toBe(2)\\n    expect(increment(5)).toBe(6)\\n    expect(increment(4)).toBe(5)\\n    expect(increment(8)).toBe(9)\\n  })\\n\\n  it(\'decrement function should return correct value\', () => {\\n    expect(decrement(2)).toBe(1)\\n    expect(decrement(5)).toBe(4)\\n    expect(decrement(4)).toBe(3)\\n    expect(decrement(8)).toBe(7)\\n  })\\n})\\n")])]),_vm._v(" "),_c(\'h2\',[_vm._v("Testing Mounting Komponen Vue")]),_vm._v(" "),_c(\'p\',[_vm._v("Dalam melakukan unit testing pada "),_c(\'strong\',[_vm._v("SFC")]),_vm._v(", hal pertama yang harus kita lakukan adalah memastikan kita berhasil memasang atau "),_c(\'em\',[_vm._v("mounting")]),_vm._v(" komponen tersebut ke dalam Virtual DOM yang ada di unit test runner. Terdengar mudah memang, tapi seringkali justru ini menjadi hal yang tersulit untuk dikerjakan karena setelah berhasil melakukan bagian ini biasanya bagian selanjutnya akan terasa lebih mudah. Untuk bisa melakukan "),_c(\'em\',[_vm._v("mounting")]),_vm._v(" kita diharuskan menyiapkan semua kebutuhan awal sebuah komponen tersebut agar bisa di-"),_c(\'em\',[_vm._v("mounting")]),_vm._v(". Cara paling bar-bar yang biasa saya lakukan adalah dengan "),_c(\'em\',[_vm._v("trial and error")]),_vm._v(", tapi bila kita telah terbiasa nanti kita bisa lebih mendeteksi lebih awal kebutuhan apa saja yang harus kita siapkan untuk "),_c(\'em\',[_vm._v("mounting")]),_vm._v(" komponen tersebut.")]),_vm._v(" "),_c(\'p\',[_vm._v("Saya beri contoh misalkan ada komponen dengan templat seperti berikut:")]),_vm._v(" "),_c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-html"}},[_vm._v("<template>\\n  Hello world, {{ message }}\\n</template>\\n")])]),_vm._v(" "),_c(\'p\',[_vm._v("Dari templat tersebut, kita mesti mencari tau darimana datangnya nilai "),_c(\'code\',{pre:true},[_vm._v("{{ message }}")]),_vm._v(" karena ini dibutuhkan pada saat pertama kali komponen tersebut nantinya dipasang. Bila datang dari "),_c(\'code\',{pre:true},[_vm._v("data ()")]),_vm._v(" bisa jadi aman karena data akan otomatis terbuat ketika komponen dipasang, bila datang dari "),_c(\'code\',{pre:true},[_vm._v("props")]),_vm._v(" berarti kita perlu mengoper props tersebut juga pada unit test kita.")]),_vm._v(" "),_c(\'p\',[_vm._v("Untuk contoh yang akan kita gunakan dalam melakukan "),_c(\'em\',[_vm._v("mounting")]),_vm._v(" komponen di unit test akan mengikuti dari contoh yang dibuat oleh tim Vue melalui Vue-CLI yang di generate pada saat awal kita membuat projek baru, berikut contoh melakukan "),_c(\'em\',[_vm._v("mounting")]),_vm._v(" komponen di unit test:")]),_vm._v(" "),_c(\'p\',[_vm._v("katakanlah kita mempunyai berkas dengan nama "),_c(\'code\',{pre:true},[_vm._v("HelloWorld.vue")]),_vm._v(" yang berisi:")]),_vm._v(" "),_c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-html"}},[_vm._v("<template>\\n  <div class=\\"hello\\">\\n    <h1>{{ msg }}</h1>\\n    \x3c!-- banyak kode lain yang kita hilangkan karena dianggap tidak diperlukan --\x3e\\n</template>\\n\\n<script>\\nexport default {\\n  name: \'HelloWorld\',\\n  props: {\\n    msg: String\\n  }\\n}\\n<\/script>\\n")])]),_vm._v(" "),_c(\'p\',[_vm._v("Maka pada berkas "),_c(\'code\',{pre:true},[_vm._v("hello-world.spec.js")]),_vm._v(" kita bisa membuat unit test sebagai berikut:")]),_vm._v(" "),_c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-javascript"}},[_vm._v("import { shallowMount } from \'@vue/test-utils\'\\nimport HelloWorld from \'@/components/HelloWorld.vue\'\\n\\ndescribe(\'HelloWorld.vue\', () => {\\n  it(\'renders props.msg ketika dilempar\', () => {\\n    const msg = \'new message\'\\n    const wrapper = shallowMount(HelloWorld, {\\n      propsData: { msg }\\n    })\\n    expect(wrapper.text()).toMatch(msg)\\n  })\\n})\\n")])]),_vm._v(" "),_c(\'p\',[_vm._v("Dari kode diatas kita belajar dasar-dasar memasang komponen pada unit test menggunakan "),_c(\'code\',{pre:true},[_vm._v("@vue/test-utils")]),_vm._v(", kita menggunakan API "),_c(\'code\',{pre:true},[_vm._v("shallowMount")]),_vm._v(" dibandingkan "),_c(\'code\',{pre:true},[_vm._v("mount")]),_vm._v(" karena kemampuan untuk memalsukan komponen anak sehingga kita tidak perlu mendefinisikan kebutuhan dari komponen anak dari komponen tersebut dan cukup fokus untuk mendefinisikan kebutuhan komponen terkait saja. Hal ini tentu selaras dengan prinsip "),_c(\'em\',[_vm._v("isolated")]),_vm._v(" pada unit testing. Pada contoh diatas kita menambahkan opsi "),_c(\'code\',{pre:true},[_vm._v("propsData")]),_vm._v(" untuk mengoper "),_c(\'code\',{pre:true},[_vm._v("props")]),_vm._v(" yang nanti akan kita bahas di bagian terpisah dibawah nanti.")]),_vm._v(" "),_c(\'h2\',[_vm._v("Testing Method di Komponen Vue")]),_vm._v(" "),_c(\'p\',[_vm._v("Setelah sebelumnya kita berhasil melakukan "),_c(\'em\',[_vm._v("mounting")]),_vm._v(", maka tugas berikutnya akan lebih mudah seperti yang sudah kita bahas sebelumnya. Pada bagian sebelumnya kita hanya melakukan "),_c(\'em\',[_vm._v("mounting")]),_vm._v(" komponen tanpa memanggil "),_c(\'em\',[_vm._v("method")]),_vm._v(" apapun, berikut contoh memanggil "),_c(\'em\',[_vm._v("method")]),_vm._v(" dalam Vue "),_c(\'strong\',[_vm._v("SFC")]),_vm._v(" melalui unit test:")]),_vm._v(" "),_c(\'p\',[_vm._v("Menggunkan berkas sebelumnya, kita akan menambahkan "),_c(\'em\',[_vm._v("method")]),_vm._v(" pada "),_c(\'strong\',[_vm._v("SFC")]),_vm._v("-nya dan melakukan sedikit perubahan seperti berikut:")]),_vm._v(" "),_c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-html"}},[_vm._v("<template>\\n  <div class=\\"hello\\">\\n    <h1>{{ msg }}</h1>\\n</template>\\n\\n<script>\\nexport default {\\n  name: \'HelloWorld\',\\n  data () {\\n    return {\\n      msg: \'Sebuah pesan\'\\n    }\\n  },\\n  methods: {\\n    changeMessage (newMessage) {\\n      this.msg = newMessage\\n    }\\n  }\\n}\\n<\/script>\\n")])]),_vm._v(" "),_c(\'p\',[_vm._v("Dari kode diatas, kita bisa membuatkan unit test seperti berikut:")]),_vm._v(" "),_c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-javascript"}},[_vm._v("import { shallowMount } from \'@vue/test-utils\'\\nimport HelloWorld from \'@/components/HelloWorld.vue\'\\n\\ndescribe(\'HelloWorld.vue\', () => {\\n  it(\'berhasil mounting komponen\', () => {\\n    const msgExpected = \'Sebuah pesan\'\\n    const wrapper = shallowMount(HelloWorld)\\n    expect(wrapper.vm.msg).toBe(msgExpected)\\n  })\\n\\n  it(\'berhasil memanggil changeMessage\', () => {\\n    const msgExpected = \'Sebuah pesan\'\\n    const msgAfterChangeExpected = \'Sebuah pesan baru\'\\n    const wrapper = shallowMount(HelloWorld)\\n    expect(wrapper.vm.msg).toBe(msgExpected)\\n    // memanggil method changeMessage\\n    wrapper.vm.changeMessage(msgAfterChangeExpected)\\n    expect(wrapper.vm.msg).toBe(msgExpected)\\n  })\\n})\\n")])]),_vm._v(" "),_c(\'p\',[_vm._v("Dari kode unit test diatas kita bisa mengetahui bahwa kita bisa langsung mengakses berbagai fitur Vue komponen lewat "),_c(\'code\',{pre:true},[_vm._v("wrapper.vm")]),_vm._v(", ini sama saja seperti "),_c(\'code\',{pre:true},[_vm._v("this")]),_vm._v(" pada "),_c(\'strong\',[_vm._v("SFC")]),_vm._v(" yang merujuk pada "),_c(\'em\',[_vm._v("instance")]),_vm._v(" dari komponen tersebut. Kita bisa mengakses "),_c(\'code\',{pre:true},[_vm._v("data")]),_vm._v(", "),_c(\'code\',{pre:true},[_vm._v("method")]),_vm._v(", "),_c(\'code\',{pre:true},[_vm._v("props")]),_vm._v(", hasil dari "),_c(\'code\',{pre:true},[_vm._v("computed")]),_vm._v(" dan lainnya menggunakan "),_c(\'code\',{pre:true},[_vm._v("wrapper.vm")]),_vm._v(" yang merupakan fitur "),_c(\'code\',{pre:true},[_vm._v("@vue/test-utils")]),_vm._v(".")]),_vm._v(" "),_c(\'h2\',[_vm._v("Mensimulasikan Aksi Klik Elemen")]),_vm._v(" "),_c(\'p\',[_vm._v("Beberapa programmer tidak senang melakukan akses langsung ke "),_c(\'em\',[_vm._v("method")]),_vm._v(" tanpa melalui akses ke tampilan pengguna. Seperti pada contoh sebelumnya, unit test tersebut menjadi tidak masuk akal karena method "),_c(\'code\',{pre:true},[_vm._v("changeMessage")]),_vm._v(" pada dasarnya tidak pernah digunakan oleh templat dan menjadi hal yang sia-sia karena kode tersebut tidak pernah mempengaruhi pengguna pada akhirnya.")]),_vm._v(" "),_c(\'p\',[_vm._v("Untuk mengakomodir hal ini, beberapa programmer lebih senang melakukan unit test dengan mensimulasikan apa yang harus dilakukan pengguna akhir pada aplikasi mereka tanpa mengakses ke "),_c(\'em\',[_vm._v("method")]),_vm._v(" secara langsung.")]),_vm._v(" "),_c(\'p\',[_vm._v("Dari contoh kode sebelumnya kita akan melakukan perubahan agar "),_c(\'em\',[_vm._v("method")]),_vm._v(" "),_c(\'code\',{pre:true},[_vm._v("changeMessage")]),_vm._v(" menjadi berguna, seperti berikut:")]),_vm._v(" "),_c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-html"}},[_vm._v("<template>\\n  <div class=\\"hello\\">\\n    <h1 class=\\"message\\">{{ msg }}</h1>\\n    <button\\n      class=\\"btn\\"\\n      @click=\\"changeMessage(\'Sebuah pesan baru\')\\">\\n      Ubah pesan\\n    </button>\\n</template>\\n\\n<script>\\nexport default {\\n  name: \'HelloWorld\',\\n  data () {\\n    return {\\n      msg: \'Sebuah pesan\'\\n    }\\n  },\\n  methods: {\\n    changeMessage (newMessage) {\\n      this.msg = newMessage\\n    }\\n  }\\n}\\n<\/script>\\n")])]),_vm._v(" "),_c(\'p\',[_vm._v("Dari kode diatas, kita bisa membuatkan unit test seperti berikut:")]),_vm._v(" "),_c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-javascript"}},[_vm._v("import { shallowMount } from \'@vue/test-utils\'\\nimport HelloWorld from \'@/components/HelloWorld.vue\'\\n\\ndescribe(\'HelloWorld.vue\', () => {\\n  it(\'berhasil mounting komponen\', () => {\\n    const msgExpected = \'Sebuah pesan\'\\n    const wrapper = shallowMount(HelloWorld)\\n    expect(wrapper.find(\'.message\')).toBe(msgExpected)\\n  })\\n\\n  it(\'berhasil memanggil changeMessage melalui aksi klik\', () => {\\n    const msgExpected = \'Sebuah pesan\'\\n    const msgAfterChangeExpected = \'Sebuah pesan baru\'\\n    const wrapper = shallowMount(HelloWorld)\\n    expect(wrapper.find(\'.message\')).toBe(msgExpected)\\n\\n    // memanggil method changeMessage lewat aksi klik\\n    const buttonElemen = wrapper.find(\'.btn\')\\n    buttonWrapper.trigger(\'click\')\\n\\n    // mengecek perubahan setelah klik\\n    expect(wrapper.find(\'.message\')).toBe(msgAfterChangeExpected)\\n  })\\n})\\n")])]),_vm._v(" "),_c(\'p\',[_vm._v("Bisa dilihat perbedaanya dari cara kita melakukan test pada bagian sebelumnya dengan cara kita melakukan test pada bagian ini, pada bagian ini kita benar-benar mensimulasikan bagaimana tampilan dari komponen ini nantinya akan digunakan oleh pengguna.")]),_vm._v(" "),_c(\'p\',[_vm._v("Kedua cara yang kita contohkan benar dan boleh saja dilakukan. Kita bahkan bisa mengerjakan kedua cara tersebut dalam satu berkas unit test. Pilihan terserah pada Anda masing-masing. Cara pertama tentu lebih cepat apalagi kalau mengejar "),_c(\'code\',{pre:true},[_vm._v("coverage")]),_vm._v(", cara kedua lebih baik dan lebih berorientasi pada pengguna tapi seringkali menghabiskan lebih banyak waktu untuk dibuat.")]),_vm._v(" "),_c(\'h2\',[_vm._v("Testing Props di Komponen Vue")]),_vm._v(" "),_c(\'p\',[_vm._v("Sebelum melakukan test pada "),_c(\'code\',{pre:true},[_vm._v("props")]),_vm._v(", kita mesti mengetahui terlebih dahulu bahwa "),_c(\'code\',{pre:true},[_vm._v("props")]),_vm._v(" adalah sebuah nilai yang dioper oleh komponen lain, nilainya berupa satu arah yang artinya tidak bisa kita ubah secara langsung dari komponen yang menerima "),_c(\'code\',{pre:true},[_vm._v("props")]),_vm._v(", beberapa props sudah didefinisikan tipe data maupun struktur data yang diperbolehkan. Pada unit test kita bisa menggunakan fitur "),_c(\'code\',{pre:true},[_vm._v("propsData")]),_vm._v(" untuk melempar "),_c(\'code\',{pre:true},[_vm._v("props")]),_vm._v(" pada komponen tanpa perlu membuat komponen induk terlebih dahulu, berikut contoh membuat unit test pada "),_c(\'code\',{pre:true},[_vm._v("props")]),_vm._v(":")]),_vm._v(" "),_c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-html"}},[_vm._v("<template>\\n  <div class=\\"hello\\">\\n    <h1>{{ msg }}</h1>\\n    <h2>{{ num }}</h2>\\n    <h3>{{ obj.name }}</h3>\\n    <h4>{{ obj.desc }}</h4>\\n</template>\\n\\n<script>\\nexport default {\\n  name: \'HelloWorld\',\\n  props: {\\n    msg: String,\\n    num: {\\n      type: Number,\\n      default: 0\\n    },\\n    obj: {\\n      type: Object,\\n      default: () => ({\\n        name: \'\',\\n        desc: \'\'\\n      })\\n    },\\n  }\\n}\\n<\/script>\\n")])]),_vm._v(" "),_c(\'p\',[_vm._v("Maka kita bisa membuat unit test dari kode diatas sebagai berikut:")]),_vm._v(" "),_c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-javascript"}},[_vm._v("import { shallowMount } from \'@vue/test-utils\'\\nimport HelloWorld from \'@/components/HelloWorld.vue\'\\n\\ndescribe(\'HelloWorld.vue\', () => {\\n  it(\'renders props.msg ketika dilempar\', () => {\\n    const msgProp = \'sebuah pesan\'\\n    const numProp = 12345\\n    const objProp = {\\n      name: \'sebuah nama\',\\n      desc: \'sebuah deskripsi\'\\n    }\\n    const wrapper = shallowMount(HelloWorld, {\\n      propsData: {\\n        msg: msgProp,\\n        num: numProp,\\n        obj: objProp,\\n      }\\n    })\\n    expect(wrapper.find(\'h1\')).toBe(msgProp)\\n    expect(wrapper.find(\'h2\')).toBe(numProp)\\n    expect(wrapper.find(\'h3\')).toBe(objProp.name)\\n    expect(wrapper.find(\'h4\')).toBe(objProp.desc)\\n  })\\n})\\n")])]),_vm._v(" "),_c(\'h2\',[_vm._v("Testing Computed dan Watcher")]),_vm._v(" "),_c(\'p\',[_vm._v("Untuk melakukan test pada "),_c(\'code\',{pre:true},[_vm._v("computed")]),_vm._v(" dan "),_c(\'code\',{pre:true},[_vm._v("watch")]),_vm._v(" kita perlu mengetahui apa yang sebenarnya dilakukan keduanya di dalam Vue "),_c(\'strong\',[_vm._v("SFC")]),_vm._v(". Kita akan memahami mengenai dua hal ini lewat contoh kode berikut:")]),_vm._v(" "),_c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-javascript"}},[_vm._v("export default {\\n  data () {\\n    return {\\n      firstName: \'Irfan\',\\n      lastName: \'Maulana\'\\n    }\\n  },\\n  computed: {\\n    fullName () {\\n      return `${this.firstName} ${this.lastName}`\\n    }\\n  }\\n}\\n")])]),_vm._v(" "),_c(\'p\',[_vm._v("Kode yang sama bila kita selesaikan dengan "),_c(\'code\',{pre:true},[_vm._v("watch")]),_vm._v(" akan menjadi:")]),_vm._v(" "),_c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-javascript"}},[_vm._v("export default {\\n  data () {\\n    return {\\n      firstName: \'Irfan\',\\n      lastName: \'Maulana\',\\n      fullName: \'\',\\n    }\\n  },\\n  watch: {\\n    firstName (newValue) {\\n      this.fullName = `${newValue} ${this.lastName}`\\n    },\\n    lastName (newValue) {\\n      this.fullName = `${this.firstName} ${newValue}`\\n    }\\n  }\\n}\\n")])]),_vm._v(" "),_c(\'p\',[_vm._v("Dari contoh kode diatas, kita bisa tau bahwa "),_c(\'code\',{pre:true},[_vm._v("computed")]),_vm._v(" akan mengkalkulasikan ulang nilainya pada saat suatu variabel yang digunakan dibawah fungsi "),_c(\'code\',{pre:true},[_vm._v("computed")]),_vm._v(" mengalami perubahan. Ciri khas dari "),_c(\'code\',{pre:true},[_vm._v("computed")]),_vm._v(" sendiri adalah selalu mengambalikan nilai baru yang akan menjadi bagian dari "),_c(\'code\',{pre:true},[_vm._v("data")]),_vm._v(", meskipun begitu nilai dari "),_c(\'code\',{pre:true},[_vm._v("computed")]),_vm._v(" tidak bisa kita ubah secara langsung. Nilainya hanya bisa diubah dengan melakukan perubahan pada variabel yang digunakan oleh "),_c(\'code\',{pre:true},[_vm._v("computed")]),_vm._v(" tersebut. Sedangkan pada "),_c(\'code\',{pre:true},[_vm._v("watch")]),_vm._v(" sama-sama akan dijalankan ketika terjadi perubahan pada variabel di dalamnya, hanya saja "),_c(\'code\',{pre:true},[_vm._v("watch")]),_vm._v(" tidak akan mengembalikan nilai baru yang bisa kita gunakan.")]),_vm._v(" "),_c(\'p\',[_vm._v("Berikut contoh kode untuk membuat unit test pada "),_c(\'code\',{pre:true},[_vm._v("computed")]),_vm._v(" dan "),_c(\'code\',{pre:true},[_vm._v("watch")]),_vm._v(":")]),_vm._v(" "),_c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-javascript"}},[_vm._v("<template>\\n  <h1>{{ fullName }}</h1>\\n</template>\\n\\n<script>\\nexport default {\\n  data () {\\n    return {\\n      firstName: \'Irfan\',\\n      lastName: \'Maulana\'\\n    }\\n  },\\n  computed: {\\n    fullName () {\\n      return `${this.firstName} ${this.lastName}`\\n    }\\n  }\\n}\\n<\/script>\\n")])]),_vm._v(" "),_c(\'p\',[_vm._v("Dari kode tersebut kita membuat unit test berikut:")]),_vm._v(" "),_c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-javascript"}},[_vm._v("import { shallowMount } from \'@vue/test-utils\'\\nimport HelloWorld from \'@/components/HelloWorld.vue\'\\n\\ndescribe(\'HelloWorld.vue\', () => {\\n  it(\'computed seharusnya ter-trigger\', () => {\\n    const wrapper = shallowMount(HelloWorld)\\n    expect(wrapper.find(\'h1\')).toBe(\'Irfan Maulana\')\\n\\n    // nilai firstName dan lastName akan kita ubah\\n    wrapper.vm.firstName = \'Syamil\'\\n    wrapper.vm.lastName = \'Al-Khawarizmi\'\\n\\n    // mengecek perubahan\\n    expect(wrapper.find(\'h1\')).toBe(\'Syamil Al-Khawarizmi\')\\n  })\\n})\\n")])]),_vm._v(" "),_c(\'p\',[_vm._v("Pada kasus menggunakan "),_c(\'code\',{pre:true},[_vm._v("watch")]),_vm._v(" bisa dilihat pada contoh kasus berikut:")]),_vm._v(" "),_c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-javascript"}},[_vm._v("<template>\\n  <h1>{{ fullName }}</h1>\\n</template>\\n\\n<script>\\nexport default {\\n  data () {\\n    return {\\n      firstName: \'Irfan\',\\n      lastName: \'Maulana\',\\n      fullName: \'\',\\n    }\\n  },\\n  watch: {\\n    firstName (newValue) {\\n      this.fullName = `${newValue} ${this.lastName}`\\n    },\\n    lastName (newValue) {\\n      this.fullName = `${this.firstName} ${newValue}`\\n    }\\n  }\\n}\\n<\/script>\\n")])]),_vm._v(" "),_c(\'p\',[_vm._v("Dari kode tersebut kita membuat unit test berikut:")]),_vm._v(" "),_c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-javascript"}},[_vm._v("import { shallowMount } from \'@vue/test-utils\'\\nimport HelloWorld from \'@/components/HelloWorld.vue\'\\n\\ndescribe(\'HelloWorld.vue\', () => {\\n  it(\'watch seharusnya ter-trigger\', () => {\\n    const wrapper = shallowMount(HelloWorld)\\n    expect(wrapper.find(\'h1\')).toBe(\'Irfan Maulana\')\\n\\n    // nilai firstName dan lastName akan kita ubah\\n    wrapper.vm.firstName = \'Syamil\'\\n    wrapper.vm.lastName = \'Al-Khawarizmi\'\\n\\n    // mengecek perubahan\\n    expect(wrapper.find(\'h1\')).toBe(\'Syamil Al-Khawarizmi\')\\n  })\\n})\\n")])]),_vm._v(" "),_c(\'h2\',[_vm._v("Testing Event Emitter")]),_vm._v(" "),_c(\'p\',[_vm._v("Seringkali pada sebuah komponen kita harus melakukan "),_c(\'code\',{pre:true},[_vm._v("$emit")]),_vm._v(" terhadap "),_c(\'em\',[_vm._v("event")]),_vm._v(" yang dilempar oleh komponen induknya. Masalahnya adalah ketika kita mengetest komponen anak yang seperti ini, kita sebenarnya tidak pernah tau "),_c(\'em\',[_vm._v("event")]),_vm._v(" seperti apa yang akan dilempar oleh komponen induknya. Ketidakpunyaan penglihatan kita terhadap aksi sejenis ini membuat kita tidak bisa melakukan test yang bisa kita pastikan hasilnya, karenanya kita biasanya cuma akan melakukan "),_c(\'code\',{pre:true},[_vm._v("Spy")]),_vm._v(" terhadap fungsi seperti ini. Untungnya dari "),_c(\'code\',{pre:true},[_vm._v("@vue/test-utils")]),_vm._v(" sudah menyediakan API yang memudahkan kita melakukan ini yakni "),_c(\'a\',{attrs:{"href":"https://vue-test-utils.vuejs.org/api/wrapper/emitted.html"}},[_vm._v("emitted")]),_vm._v(".")]),_vm._v(" "),_c(\'p\',[_vm._v("Contoh menggunakan "),_c(\'code\',{pre:true},[_vm._v("emitted")]),_vm._v(" sebagai berikut, misalkan kita memiliki kode:")]),_vm._v(" "),_c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-javascript"}},[_vm._v("export default {\\n  methods: {\\n    emitSomething () {\\n      this.$emit(\'foo\', 123)\\n    }\\n  }\\n}\\n")])]),_vm._v(" "),_c(\'p\',[_vm._v("Maka kita bisa membuatkan unit test sebagai berikut:")]),_vm._v(" "),_c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-javascript"}},[_vm._v("import { shallowMount } from \'@vue/test-utils\'\\nimport HelloWorld from \'@/components/HelloWorld.vue\'\\n\\ndescribe(\'HelloWorld.vue\', () => {\\n  it(\'memanggil $emit\', () => {\\n    const wrapper = shallowMount(HelloWorld)\\n    wrapper.vm.emitSomething()\\n    expect(wrapper.emitted().foo).toBeTruthy()\\n    expect(wrapper.emitted(\'foo\')).toBeTruthy()\\n  })\\n})\\n")])]),_vm._v(" "),_c(\'h2\',[_vm._v("Testing Perpindahan Route")]),_vm._v(" "),_c(\'p\',[_vm._v("Terkadang pada sebuah projek kita diharuskan melakukan manipulasi "),_c(\'code\',{pre:true},[_vm._v("route")]),_vm._v(" pada sebuah seperti menggunakan "),_c(\'code\',{pre:true},[_vm._v("router.push")]),_vm._v(", "),_c(\'code\',{pre:true},[_vm._v("router.go")]),_vm._v(" atau lainnya. Sebelum kita melakukan test pada kode seperti ini, kita paling tidak mesti tau apa yang terjadi ketika kita melakukan manipulasi "),_c(\'code\',{pre:true},[_vm._v("router")]),_vm._v(" di Vue. Vue memanfaatkan pustaka tambahan yakni "),_c(\'code\',{pre:true},[_vm._v("Vue Router")]),_vm._v(" untuk melakukan manipulasi "),_c(\'code\',{pre:true},[_vm._v("router")]),_vm._v(" yang mana diurus secara resmi oleh tim yang sama dengan yang membuat Vue inti.")]),_vm._v(" "),_c(\'p\',[_vm._v("Ada dua objek yang harus kita tau ketika menggunakan "),_c(\'code\',{pre:true},[_vm._v("Vue Router")]),_vm._v(" yakni, "),_c(\'code\',{pre:true},[_vm._v("route")]),_vm._v(" yang bisa diakses lewat "),_c(\'strong\',[_vm._v("SFC")]),_vm._v(" melalui "),_c(\'code\',{pre:true},[_vm._v("this.$route")]),_vm._v(" dan juga "),_c(\'code\',{pre:true},[_vm._v("router")]),_vm._v(" yang bisa diakses melalui "),_c(\'code\',{pre:true},[_vm._v("this.$router")]),_vm._v(". "),_c(\'code\',{pre:true},[_vm._v("Route")]),_vm._v(" adalah representasi posisi halaman saat ini, berupa objek yang berisi "),_c(\'code\',{pre:true},[_vm._v("path")]),_vm._v(", "),_c(\'code\',{pre:true},[_vm._v("name")]),_vm._v(", "),_c(\'code\',{pre:true},[_vm._v("query")]),_vm._v(" dan sebagainya. Sementara "),_c(\'code\',{pre:true},[_vm._v("Router")]),_vm._v(" merupakan objek yang bisa memanipulasi posisi "),_c(\'code\',{pre:true},[_vm._v("route")]),_vm._v(" tersebut. Jadi kita akan mengakses "),_c(\'code\',{pre:true},[_vm._v("router")]),_vm._v(" untuk mengubah "),_c(\'code\',{pre:true},[_vm._v("route")]),_vm._v(" dan akan mengecek "),_c(\'code\',{pre:true},[_vm._v("route")]),_vm._v(" untuk mengetahui apakah manipulasi tersebut berhasil ataukah tidak.")]),_vm._v(" "),_c(\'p\',[_vm._v("Contoh kode berikut akan memberikan gambaran mengenai dua hal tersebut:")]),_vm._v(" "),_c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-javascript"}},[_vm._v("export default {\\n  methods: {\\n    changeRoute () {\\n      this.$router.push(\'/\')\\n      // console.log(this.$route.path)\\n      // akan mencetak nilai /\\n      this.$router.push(\'/foo\')\\n      // console.log(this.$route.path)\\n      // akan mencetak nilai /foo\\n      this.$router.push(\'/bar\')\\n      // console.log(this.$route.path)\\n      // akan mencetak nilai /bar\\n    }\\n  }\\n}\\n")])]),_vm._v(" "),_c(\'h2\',[_vm._v("Testing Vuex")]),_vm._v(" "),_c(\'h2\',[_vm._v("Testing Dengan Vue-i18n")]),_vm._v(" "),_c(\'h2\',[_vm._v("Testing Pemanggilan API")]),_vm._v(" "),_c(\'hr\'),_vm._v(" "),_c(\'p\',[_vm._v("References:")]),_vm._v(" "),_c(\'ol\',[_c(\'li\',[_c(\'a\',{attrs:{"href":"https://www.guru99.com/unit-testing-guide.html"}},[_vm._v("https://www.guru99.com/unit-testing-guide.html")])]),_vm._v(" "),_c(\'li\',[_c(\'a\',{attrs:{"href":"https://lmiller1990.github.io/vue-testing-handbook/"}},[_vm._v("https://lmiller1990.github.io/vue-testing-handbook/")])]),_vm._v(" "),_c(\'li\',[_c(\'a\',{attrs:{"href":"https://vue-test-utils.vuejs.org/"}},[_vm._v("https://vue-test-utils.vuejs.org/")])])])]) }]'}],error:null,serverRendered:!0}</script><script src="/_nuxt/07ec355889d2e314dcb2.js" defer></script><script src="/_nuxt/c7db1302d5390062f854.js" defer></script><script src="/_nuxt/3f42a658e1bb176d9851.js" defer></script><script src="/_nuxt/fcb9031aca68746a6f43.js" defer></script><script src="/_nuxt/767ff0b7254f7ad0f5c4.js" defer></script><noscript data-n-head="true" data-body="true">This website requires JavaScript.</noscript>
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "WebSite",
        "url": "https://www.mazipan.xyz",
        "name": "Irfan Maulana",
        "author": "Irfan Maulana",
        "image": "https://www.mazipan.xyz/icon.png",
        "description": "A personal blog by Irfan Maulana",
        "sameAs": [
          "https://www.facebook.com/mazipanneh",
          "https://instagram.com/maz_ipan",
          "https://twitter.com/Maz_Ipan",
          "https://id.linkedin.com/in/mazipan",
          "https://www.slideshare.net/IrfanMaulana21",
          "https://github.com/mazipan"
        ]
      }
    </script>
  </body>
</html>
